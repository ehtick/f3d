(function(){const se=document.createElement("link").relList;if(se&&se.supports&&se.supports("modulepreload"))return;for(const N of document.querySelectorAll('link[rel="modulepreload"]'))q(N);new MutationObserver(N=>{for(const X of N)if(X.type==="childList")for(const le of X.addedNodes)le.tagName==="LINK"&&le.rel==="modulepreload"&&q(le)}).observe(document,{childList:!0,subtree:!0});function g(N){const X={};return N.integrity&&(X.integrity=N.integrity),N.referrerPolicy&&(X.referrerPolicy=N.referrerPolicy),N.crossOrigin==="use-credentials"?X.credentials="include":N.crossOrigin==="anonymous"?X.credentials="omit":X.credentials="same-origin",X}function q(N){if(N.ep)return;N.ep=!0;const X=g(N);fetch(N.href,X)}})();var ul=(async function(x={}){var se,g=x,q="./this.program",N=(e,r)=>{throw r},X=import.meta.url,le="";function Ie(e){return g.locateFile?g.locateFile(e,le):le+e}var Fe,Oe;{try{le=new URL(".",X).href}catch{}Fe=async e=>{var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)}}var me=console.log.bind(console),H=console.error.bind(console),ge,ce=!1,he;function D(e,r){e||ze(r)}var $,I,j,k,A,O,ee,m,S,Y,ne,Q,Br,tr=!1;function Tr(){var e=j.buffer;k=new Int8Array(e),O=new Int16Array(e),A=new Uint8Array(e),ee=new Uint16Array(e),m=new Int32Array(e),S=new Uint32Array(e),Y=new Float32Array(e),ne=new Float64Array(e),Q=new BigInt64Array(e),Br=new BigUint64Array(e)}function Ot(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)Yt(g.preRun.shift());Lr(Rr)}function Ut(){tr=!0,!g.noFSInit&&!o.initialized&&o.init(),we.Gc(),o.ignorePermissions=!1}function zt(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)Xt(g.postRun.shift());Lr(Dr)}var pe=0,Be=null;function nr(e){pe++,g.monitorRunDependencies?.(pe)}function Ue(e){if(pe--,g.monitorRunDependencies?.(pe),pe==0&&Be){var r=Be;Be=null,r()}}function ze(e){g.onAbort?.(e),e="Aborted("+e+")",H(e),ce=!0,e+=". Build with -sASSERTIONS for more info.",tr&&Bt();var r=new WebAssembly.RuntimeError(e);throw I?.(r),r}var ar;function Wt(){return g.locateFile?Ie("f3d.wasm"):new URL(""+new URL("f3d-CsYCeB6P.wasm",import.meta.url).href,import.meta.url).href}function Ht(e){if(e==ar&&ge)return new Uint8Array(ge);throw"both async and sync fetching of the wasm failed"}async function Gt(e){if(!ge)try{var r=await Fe(e);return new Uint8Array(r)}catch{}return Ht(e)}async function Vt(e,r){try{var t=await Gt(e),n=await WebAssembly.instantiate(t,r);return n}catch(a){H(`failed to asynchronously prepare wasm: ${a}`),ze(a)}}async function Nt(e,r,t){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var n=fetch(r,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(n,t);return a}catch(i){H(`wasm streaming compile failed: ${i}`),H("falling back to ArrayBuffer instantiation")}return Vt(r,t)}function jt(){return{a:sl}}async function qt(){function e(i,s){return we=i.exports,j=we.Fc,Tr(),Mr=we.Ic,It=we.Kc,ol(we),Ue(),we}nr();function r(i){return e(i.instance)}var t=jt();if(g.instantiateWasm)return new Promise((i,s)=>{g.instantiateWasm(t,(l,u)=>{i(e(l))})});ar??=Wt();var n=await Nt(ge,ar,t),a=r(n);return a}class Ar{name="ExitStatus";constructor(r){this.message=`Program terminated with exit(${r})`,this.status=r}}var Lr=e=>{for(;e.length>0;)e.shift()(g)},Dr=[],Xt=e=>Dr.push(e),Rr=[],Yt=e=>Rr.push(e),Mr,Z=e=>Mr.get(e),$r=!0,Ir=new TextDecoder,J=(e,r)=>{if(!e)return"";for(var t=e+r,n=e;!(n>=t)&&A[n];)++n;return Ir.decode(A.subarray(e,n))},Kt=(e,r,t,n)=>ze(`Assertion failed: ${J(e)}, at: `+[r?J(r):"unknown filename",t,n?J(n):"unknown function"]),R={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var a=e[n];a==="."?e.splice(n,1):a===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=R.isAbs(e),t=e.slice(-1)==="/";return e=R.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=R.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.slice(0,-1)),t+n)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>R.normalize(e.join("/")),join2:(e,r)=>R.normalize(e+"/"+r)},Qt=()=>e=>crypto.getRandomValues(e),Or=e=>{(Or=Qt())(e)},_e={resolve:(...e)=>{for(var r="",t=!1,n=e.length-1;n>=-1&&!t;n--){var a=n>=0?e[n]:o.cwd();if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";r=a+"/"+r,t=R.isAbs(a)}return r=R.normalizeArray(r.split("/").filter(i=>!!i),!t).join("/"),(t?"/":"")+r||"."},relative:(e,r)=>{e=_e.resolve(e).slice(1),r=_e.resolve(r).slice(1);function t(f){for(var v=0;v<f.length&&f[v]==="";v++);for(var h=f.length-1;h>=0&&f[h]==="";h--);return v>h?[]:f.slice(v,h-v+1)}for(var n=t(e.split("/")),a=t(r.split("/")),i=Math.min(n.length,a.length),s=i,l=0;l<i;l++)if(n[l]!==a[l]){s=l;break}for(var u=[],l=s;l<n.length;l++)u.push("..");return u=u.concat(a.slice(s)),u.join("/")}},Te=(e,r=0,t=NaN)=>{for(var n=r+t,a=r;e[a]&&!(a>=n);)++a;return Ir.decode(e.buffer?e.subarray(r,a):new Uint8Array(e.slice(r,a)))},ir=[],fe=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},Ur=(e,r,t,n)=>{if(!(n>0))return 0;for(var a=t,i=t+n-1,s=0;s<e.length;++s){var l=e.codePointAt(s);if(l<=127){if(t>=i)break;r[t++]=l}else if(l<=2047){if(t+1>=i)break;r[t++]=192|l>>6,r[t++]=128|l&63}else if(l<=65535){if(t+2>=i)break;r[t++]=224|l>>12,r[t++]=128|l>>6&63,r[t++]=128|l&63}else{if(t+3>=i)break;r[t++]=240|l>>18,r[t++]=128|l>>12&63,r[t++]=128|l>>6&63,r[t++]=128|l&63,s++}}return r[t]=0,t-a},or=(e,r,t)=>{var n=fe(e)+1,a=new Array(n),i=Ur(e,a,0,a.length);return a.length=i,a},Zt=()=>{if(!ir.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;ir=or(e)}return ir.shift()},ye={ttys:[],init(){},shutdown(){},register(e,r){ye.ttys[e]={input:[],output:[],ops:r},o.registerDevice(e,ye.stream_ops)},stream_ops:{open(e){var r=ye.ttys[e.node.rdev];if(!r)throw new o.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,t,n,a){if(!e.tty||!e.tty.ops.get_char)throw new o.ErrnoError(60);for(var i=0,s=0;s<n;s++){var l;try{l=e.tty.ops.get_char(e.tty)}catch{throw new o.ErrnoError(29)}if(l===void 0&&i===0)throw new o.ErrnoError(6);if(l==null)break;i++,r[t+s]=l}return i&&(e.node.atime=Date.now()),i},write(e,r,t,n,a){if(!e.tty||!e.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,r[t+i])}catch{throw new o.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},default_tty_ops:{get_char(e){return Zt()},put_char(e,r){r===null||r===10?(me(Te(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output?.length>0&&(me(Te(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,r,t){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,r){r===null||r===10?(H(Te(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output?.length>0&&(H(Te(e.output)),e.output=[])}}},Jt=(e,r)=>A.fill(0,e,e+r),zr=(e,r)=>Math.ceil(e/r)*r,Wr=e=>{e=zr(e,65536);var r=Ft(65536,e);return r&&Jt(r,e),r},P={ops_table:null,mount(e){return P.createNode(null,"/",16895,0)},createNode(e,r,t,n){if(o.isBlkdev(t)||o.isFIFO(t))throw new o.ErrnoError(63);P.ops_table||={dir:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr,lookup:P.node_ops.lookup,mknod:P.node_ops.mknod,rename:P.node_ops.rename,unlink:P.node_ops.unlink,rmdir:P.node_ops.rmdir,readdir:P.node_ops.readdir,symlink:P.node_ops.symlink},stream:{llseek:P.stream_ops.llseek}},file:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr},stream:{llseek:P.stream_ops.llseek,read:P.stream_ops.read,write:P.stream_ops.write,mmap:P.stream_ops.mmap,msync:P.stream_ops.msync}},link:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr,readlink:P.node_ops.readlink},stream:{}},chrdev:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr},stream:o.chrdev_stream_ops}};var a=o.createNode(e,r,t,n);return o.isDir(a.mode)?(a.node_ops=P.ops_table.dir.node,a.stream_ops=P.ops_table.dir.stream,a.contents={}):o.isFile(a.mode)?(a.node_ops=P.ops_table.file.node,a.stream_ops=P.ops_table.file.stream,a.usedBytes=0,a.contents=null):o.isLink(a.mode)?(a.node_ops=P.ops_table.link.node,a.stream_ops=P.ops_table.link.stream):o.isChrdev(a.mode)&&(a.node_ops=P.ops_table.chrdev.node,a.stream_ops=P.ops_table.chrdev.stream),a.atime=a.mtime=a.ctime=Date.now(),e&&(e.contents[r]=a,e.atime=e.mtime=e.ctime=a.atime),a},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var a=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(a.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=o.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,o.isDir(e.mode)?r.size=4096:o.isFile(e.mode)?r.size=e.usedBytes:o.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.atime),r.mtime=new Date(e.mtime),r.ctime=new Date(e.ctime),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){for(const t of["mode","atime","mtime","ctime"])r[t]!=null&&(e[t]=r[t]);r.size!==void 0&&P.resizeFileStorage(e,r.size)},lookup(e,r){throw P.doesNotExistError},mknod(e,r,t,n){return P.createNode(e,r,t,n)},rename(e,r,t){var n;try{n=o.lookupNode(r,t)}catch{}if(n){if(o.isDir(e.mode))for(var a in n.contents)throw new o.ErrnoError(55);o.hashRemoveNode(n)}delete e.parent.contents[e.name],r.contents[t]=e,e.name=t,r.ctime=r.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,r){delete e.contents[r],e.ctime=e.mtime=Date.now()},rmdir(e,r){var t=o.lookupNode(e,r);for(var n in t.contents)throw new o.ErrnoError(55);delete e.contents[r],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,r,t){var n=P.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!o.isLink(e.mode))throw new o.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,a){var i=e.node.contents;if(a>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-a,n);if(s>8&&i.subarray)r.set(i.subarray(a,a+s),t);else for(var l=0;l<s;l++)r[t+l]=i[a+l];return s},write(e,r,t,n,a,i){if(r.buffer===k.buffer&&(i=!1),!n)return 0;var s=e.node;if(s.mtime=s.ctime=Date.now(),r.subarray&&(!s.contents||s.contents.subarray)){if(i)return s.contents=r.subarray(t,t+n),s.usedBytes=n,n;if(s.usedBytes===0&&a===0)return s.contents=r.slice(t,t+n),s.usedBytes=n,n;if(a+n<=s.usedBytes)return s.contents.set(r.subarray(t,t+n),a),n}if(P.expandFileStorage(s,a+n),s.contents.subarray&&r.subarray)s.contents.set(r.subarray(t,t+n),a);else for(var l=0;l<n;l++)s.contents[a+l]=r[t+l];return s.usedBytes=Math.max(s.usedBytes,a+n),n},llseek(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&o.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new o.ErrnoError(28);return n},mmap(e,r,t,n,a){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);var i,s,l=e.node.contents;if(!(a&2)&&l&&l.buffer===k.buffer)s=!1,i=l.byteOffset;else{if(s=!0,i=Wr(r),!i)throw new o.ErrnoError(48);l&&((t>0||t+r<l.length)&&(l.subarray?l=l.subarray(t,t+r):l=Array.prototype.slice.call(l,t,t+r)),k.set(l,i))}return{ptr:i,allocated:s}},msync(e,r,t,n,a){return P.stream_ops.write(e,r,0,n,t,!1),0}}},en=async e=>{var r=await Fe(e);return new Uint8Array(r)},Hr=(...e)=>o.createDataFile(...e),We=[],rn=(e,r,t,n)=>{typeof y<"u"&&y.init();var a=!1;return We.forEach(i=>{a||i.canHandle(r)&&(i.handle(e,r,t,n),a=!0)}),a},Gr=(e,r,t,n,a,i,s,l,u,f)=>{var v=r?_e.resolve(R.join2(e,r)):e;function h(_){function p(E){f?.(),l||Hr(e,r,E,n,a,u),i?.(),Ue()}rn(_,v,p,()=>{s?.(),Ue()})||p(_)}nr(),typeof t=="string"?en(t).then(h,s):h(t)},tn=e=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=r[e];if(typeof t>"u")throw new Error(`Unknown file open mode: ${e}`);return t},sr=(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.id=o.nextInode++,this.name=r,this.mode=t,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return o.isDir(this.mode)}get isDevice(){return o.isChrdev(this.mode)}},lookupPath(e,r={}){if(!e)throw new o.ErrnoError(44);r.follow_mount??=!0,R.isAbs(e)||(e=o.cwd()+"/"+e);e:for(var t=0;t<40;t++){for(var n=e.split("/").filter(f=>!!f),a=o.root,i="/",s=0;s<n.length;s++){var l=s===n.length-1;if(l&&r.parent)break;if(n[s]!=="."){if(n[s]===".."){if(i=R.dirname(i),o.isRoot(a)){e=i+"/"+n.slice(s+1).join("/");continue e}else a=a.parent;continue}i=R.join2(i,n[s]);try{a=o.lookupNode(a,n[s])}catch(f){if(f?.errno===44&&l&&r.noent_okay)return{path:i};throw f}if(o.isMountpoint(a)&&(!l||r.follow_mount)&&(a=a.mounted.root),o.isLink(a.mode)&&(!l||r.follow)){if(!a.node_ops.readlink)throw new o.ErrnoError(52);var u=a.node_ops.readlink(a);R.isAbs(u)||(u=R.dirname(i)+"/"+u),e=u+"/"+n.slice(s+1).join("/");continue e}}}return{path:i,node:a}}throw new o.ErrnoError(32)},getPath(e){for(var r;;){if(o.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%o.nameTable.length},hashAddNode(e){var r=o.hashName(e.parent.id,e.name);e.name_next=o.nameTable[r],o.nameTable[r]=e},hashRemoveNode(e){var r=o.hashName(e.parent.id,e.name);if(o.nameTable[r]===e)o.nameTable[r]=e.name_next;else for(var t=o.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,r){var t=o.mayLookup(e);if(t)throw new o.ErrnoError(t);for(var n=o.hashName(e.id,r),a=o.nameTable[n];a;a=a.name_next){var i=a.name;if(a.parent.id===e.id&&i===r)return a}return o.lookup(e,r)},createNode(e,r,t,n){var a=new o.FSNode(e,r,t,n);return o.hashAddNode(a),a},destroyNode(e){o.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions(e,r){return o.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!o.isDir(e.mode))return 54;var r=o.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate(e,r){if(!o.isDir(e.mode))return 54;try{var t=o.lookupNode(e,r);return 20}catch{}return o.nodePermissions(e,"wx")},mayDelete(e,r,t){var n;try{n=o.lookupNode(e,r)}catch(i){return i.errno}var a=o.nodePermissions(e,"wx");if(a)return a;if(t){if(!o.isDir(n.mode))return 54;if(o.isRoot(n)||o.getPath(n)===o.cwd())return 10}else if(o.isDir(n.mode))return 31;return 0},mayOpen(e,r){return e?o.isLink(e.mode)?32:o.isDir(e.mode)&&(o.flagsToPermissionString(r)!=="r"||r&576)?31:o.nodePermissions(e,o.flagsToPermissionString(r)):44},checkOpExists(e,r){if(!e)throw new o.ErrnoError(r);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=o.MAX_OPEN_FDS;e++)if(!o.streams[e])return e;throw new o.ErrnoError(33)},getStreamChecked(e){var r=o.getStream(e);if(!r)throw new o.ErrnoError(8);return r},getStream:e=>o.streams[e],createStream(e,r=-1){return e=Object.assign(new o.FSStream,e),r==-1&&(r=o.nextfd()),e.fd=r,o.streams[r]=e,e},closeStream(e){o.streams[e]=null},dupStream(e,r=-1){var t=o.createStream(e,r);return t.stream_ops?.dup?.(t),t},doSetAttr(e,r,t){var n=e?.stream_ops.setattr,a=n?e:r;n??=r.node_ops.setattr,o.checkOpExists(n,63),n(a,t)},chrdev_stream_ops:{open(e){var r=o.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new o.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice(e,r){o.devices[e]={stream_ops:r}},getDevice:e=>o.devices[e],getMounts(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push(...n.mounts)}return r},syncfs(e,r){typeof e=="function"&&(r=e,e=!1),o.syncFSRequests++,o.syncFSRequests>1&&H(`warning: ${o.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=o.getMounts(o.root.mount),n=0;function a(s){return o.syncFSRequests--,r(s)}function i(s){if(s)return i.errored?void 0:(i.errored=!0,a(s));++n>=t.length&&a(null)}t.forEach(s=>{if(!s.type.syncfs)return i(null);s.type.syncfs(s,e,i)})},mount(e,r,t){var n=t==="/",a=!t,i;if(n&&o.root)throw new o.ErrnoError(10);if(!n&&!a){var s=o.lookupPath(t,{follow_mount:!1});if(t=s.path,i=s.node,o.isMountpoint(i))throw new o.ErrnoError(10);if(!o.isDir(i.mode))throw new o.ErrnoError(54)}var l={type:e,opts:r,mountpoint:t,mounts:[]},u=e.mount(l);return u.mount=l,l.root=u,n?o.root=u:i&&(i.mounted=l,i.mount&&i.mount.mounts.push(l)),u},unmount(e){var r=o.lookupPath(e,{follow_mount:!1});if(!o.isMountpoint(r.node))throw new o.ErrnoError(28);var t=r.node,n=t.mounted,a=o.getMounts(n);Object.keys(o.nameTable).forEach(s=>{for(var l=o.nameTable[s];l;){var u=l.name_next;a.includes(l.mount)&&o.destroyNode(l),l=u}}),t.mounted=null;var i=t.mount.mounts.indexOf(n);t.mount.mounts.splice(i,1)},lookup(e,r){return e.node_ops.lookup(e,r)},mknod(e,r,t){var n=o.lookupPath(e,{parent:!0}),a=n.node,i=R.basename(e);if(!i)throw new o.ErrnoError(28);if(i==="."||i==="..")throw new o.ErrnoError(20);var s=o.mayCreate(a,i);if(s)throw new o.ErrnoError(s);if(!a.node_ops.mknod)throw new o.ErrnoError(63);return a.node_ops.mknod(a,i,r,t)},statfs(e){return o.statfsNode(o.lookupPath(e,{follow:!0}).node)},statfsStream(e){return o.statfsNode(e.node)},statfsNode(e){var r={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:o.nextInode,ffree:o.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(r,e.node_ops.statfs(e.mount.opts.root)),r},create(e,r=438){return r&=4095,r|=32768,o.mknod(e,r,0)},mkdir(e,r=511){return r&=1023,r|=16384,o.mknod(e,r,0)},mkdirTree(e,r){var t=e.split("/"),n="";for(var a of t)if(a){(n||R.isAbs(e))&&(n+="/"),n+=a;try{o.mkdir(n,r)}catch(i){if(i.errno!=20)throw i}}},mkdev(e,r,t){return typeof t>"u"&&(t=r,r=438),r|=8192,o.mknod(e,r,t)},symlink(e,r){if(!_e.resolve(e))throw new o.ErrnoError(44);var t=o.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new o.ErrnoError(44);var a=R.basename(r),i=o.mayCreate(n,a);if(i)throw new o.ErrnoError(i);if(!n.node_ops.symlink)throw new o.ErrnoError(63);return n.node_ops.symlink(n,a,e)},rename(e,r){var t=R.dirname(e),n=R.dirname(r),a=R.basename(e),i=R.basename(r),s,l,u;if(s=o.lookupPath(e,{parent:!0}),l=s.node,s=o.lookupPath(r,{parent:!0}),u=s.node,!l||!u)throw new o.ErrnoError(44);if(l.mount!==u.mount)throw new o.ErrnoError(75);var f=o.lookupNode(l,a),v=_e.relative(e,n);if(v.charAt(0)!==".")throw new o.ErrnoError(28);if(v=_e.relative(r,t),v.charAt(0)!==".")throw new o.ErrnoError(55);var h;try{h=o.lookupNode(u,i)}catch{}if(f!==h){var _=o.isDir(f.mode),p=o.mayDelete(l,a,_);if(p)throw new o.ErrnoError(p);if(p=h?o.mayDelete(u,i,_):o.mayCreate(u,i),p)throw new o.ErrnoError(p);if(!l.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(f)||h&&o.isMountpoint(h))throw new o.ErrnoError(10);if(u!==l&&(p=o.nodePermissions(l,"w"),p))throw new o.ErrnoError(p);o.hashRemoveNode(f);try{l.node_ops.rename(f,u,i),f.parent=u}catch(E){throw E}finally{o.hashAddNode(f)}}},rmdir(e){var r=o.lookupPath(e,{parent:!0}),t=r.node,n=R.basename(e),a=o.lookupNode(t,n),i=o.mayDelete(t,n,!0);if(i)throw new o.ErrnoError(i);if(!t.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(a))throw new o.ErrnoError(10);t.node_ops.rmdir(t,n),o.destroyNode(a)},readdir(e){var r=o.lookupPath(e,{follow:!0}),t=r.node,n=o.checkOpExists(t.node_ops.readdir,54);return n(t)},unlink(e){var r=o.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new o.ErrnoError(44);var n=R.basename(e),a=o.lookupNode(t,n),i=o.mayDelete(t,n,!1);if(i)throw new o.ErrnoError(i);if(!t.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(a))throw new o.ErrnoError(10);t.node_ops.unlink(t,n),o.destroyNode(a)},readlink(e){var r=o.lookupPath(e),t=r.node;if(!t)throw new o.ErrnoError(44);if(!t.node_ops.readlink)throw new o.ErrnoError(28);return t.node_ops.readlink(t)},stat(e,r){var t=o.lookupPath(e,{follow:!r}),n=t.node,a=o.checkOpExists(n.node_ops.getattr,63);return a(n)},fstat(e){var r=o.getStreamChecked(e),t=r.node,n=r.stream_ops.getattr,a=n?r:t;return n??=t.node_ops.getattr,o.checkOpExists(n,63),n(a)},lstat(e){return o.stat(e,!0)},doChmod(e,r,t,n){o.doSetAttr(e,r,{mode:t&4095|r.mode&-4096,ctime:Date.now(),dontFollow:n})},chmod(e,r,t){var n;if(typeof e=="string"){var a=o.lookupPath(e,{follow:!t});n=a.node}else n=e;o.doChmod(null,n,r,t)},lchmod(e,r){o.chmod(e,r,!0)},fchmod(e,r){var t=o.getStreamChecked(e);o.doChmod(t,t.node,r,!1)},doChown(e,r,t){o.doSetAttr(e,r,{timestamp:Date.now(),dontFollow:t})},chown(e,r,t,n){var a;if(typeof e=="string"){var i=o.lookupPath(e,{follow:!n});a=i.node}else a=e;o.doChown(null,a,n)},lchown(e,r,t){o.chown(e,r,t,!0)},fchown(e,r,t){var n=o.getStreamChecked(e);o.doChown(n,n.node,!1)},doTruncate(e,r,t){if(o.isDir(r.mode))throw new o.ErrnoError(31);if(!o.isFile(r.mode))throw new o.ErrnoError(28);var n=o.nodePermissions(r,"w");if(n)throw new o.ErrnoError(n);o.doSetAttr(e,r,{size:t,timestamp:Date.now()})},truncate(e,r){if(r<0)throw new o.ErrnoError(28);var t;if(typeof e=="string"){var n=o.lookupPath(e,{follow:!0});t=n.node}else t=e;o.doTruncate(null,t,r)},ftruncate(e,r){var t=o.getStreamChecked(e);if(r<0||(t.flags&2097155)===0)throw new o.ErrnoError(28);o.doTruncate(t,t.node,r)},utime(e,r,t){var n=o.lookupPath(e,{follow:!0}),a=n.node,i=o.checkOpExists(a.node_ops.setattr,63);i(a,{atime:r,mtime:t})},open(e,r,t=438){if(e==="")throw new o.ErrnoError(44);r=typeof r=="string"?tn(r):r,r&64?t=t&4095|32768:t=0;var n,a;if(typeof e=="object")n=e;else{a=e.endsWith("/");var i=o.lookupPath(e,{follow:!(r&131072),noent_okay:!0});n=i.node,e=i.path}var s=!1;if(r&64)if(n){if(r&128)throw new o.ErrnoError(20)}else{if(a)throw new o.ErrnoError(31);n=o.mknod(e,t|511,0),s=!0}if(!n)throw new o.ErrnoError(44);if(o.isChrdev(n.mode)&&(r&=-513),r&65536&&!o.isDir(n.mode))throw new o.ErrnoError(54);if(!s){var l=o.mayOpen(n,r);if(l)throw new o.ErrnoError(l)}r&512&&!s&&o.truncate(n,0),r&=-131713;var u=o.createStream({node:n,path:o.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return u.stream_ops.open&&u.stream_ops.open(u),s&&o.chmod(n,t&511),g.logReadFiles&&!(r&1)&&(e in o.readFiles||(o.readFiles[e]=1)),u},close(e){if(o.isClosed(e))throw new o.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{o.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,r,t){if(o.isClosed(e))throw new o.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new o.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new o.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read(e,r,t,n,a){if(n<0||a<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if((e.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.read)throw new o.ErrnoError(28);var i=typeof a<"u";if(!i)a=e.position;else if(!e.seekable)throw new o.ErrnoError(70);var s=e.stream_ops.read(e,r,t,n,a);return i||(e.position+=s),s},write(e,r,t,n,a,i){if(n<0||a<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if((e.flags&2097155)===0)throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.write)throw new o.ErrnoError(28);e.seekable&&e.flags&1024&&o.llseek(e,0,2);var s=typeof a<"u";if(!s)a=e.position;else if(!e.seekable)throw new o.ErrnoError(70);var l=e.stream_ops.write(e,r,t,n,a,i);return s||(e.position+=l),l},mmap(e,r,t,n,a){if((n&2)!==0&&(a&2)===0&&(e.flags&2097155)!==2)throw new o.ErrnoError(2);if((e.flags&2097155)===1)throw new o.ErrnoError(2);if(!e.stream_ops.mmap)throw new o.ErrnoError(43);if(!r)throw new o.ErrnoError(28);return e.stream_ops.mmap(e,r,t,n,a)},msync(e,r,t,n,a){return e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,a):0},ioctl(e,r,t){if(!e.stream_ops.ioctl)throw new o.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile(e,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var t=o.open(e,r.flags),n=o.stat(e),a=n.size,i=new Uint8Array(a);return o.read(t,i,0,a,0),r.encoding==="utf8"&&(i=Te(i)),o.close(t),i},writeFile(e,r,t={}){t.flags=t.flags||577;var n=o.open(e,t.flags,t.mode);if(typeof r=="string"&&(r=new Uint8Array(or(r))),ArrayBuffer.isView(r))o.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");o.close(n)},cwd:()=>o.currentPath,chdir(e){var r=o.lookupPath(e,{follow:!0});if(r.node===null)throw new o.ErrnoError(44);if(!o.isDir(r.node.mode))throw new o.ErrnoError(54);var t=o.nodePermissions(r.node,"x");if(t)throw new o.ErrnoError(t);o.currentPath=r.path},createDefaultDirectories(){o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices(){o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(n,a,i,s,l)=>s,llseek:()=>0}),o.mkdev("/dev/null",o.makedev(1,3)),ye.register(o.makedev(5,0),ye.default_tty_ops),ye.register(o.makedev(6,0),ye.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(Or(e),r=e.byteLength),e[--r]);o.createDevice("/dev","random",t),o.createDevice("/dev","urandom",t),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories(){o.mkdir("/proc");var e=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount(){var r=o.createNode(e,"fd",16895,73);return r.stream_ops={llseek:P.stream_ops.llseek},r.node_ops={lookup(t,n){var a=+n,i=o.getStreamChecked(a),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path},id:a+1};return s.parent=s,s},readdir(){return Array.from(o.streams.entries()).filter(([t,n])=>n).map(([t,n])=>t.toString())}},r}},{},"/proc/self/fd")},createStandardStreams(e,r,t){e?o.createDevice("/dev","stdin",e):o.symlink("/dev/tty","/dev/stdin"),r?o.createDevice("/dev","stdout",null,r):o.symlink("/dev/tty","/dev/stdout"),t?o.createDevice("/dev","stderr",null,t):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},staticInit(){o.nameTable=new Array(4096),o.mount(P,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:P}},init(e,r,t){o.initialized=!0,e??=g.stdin,r??=g.stdout,t??=g.stderr,o.createStandardStreams(e,r,t)},quit(){o.initialized=!1;for(var e of o.streams)e&&o.close(e)},findObject(e,r){var t=o.analyzePath(e,r);return t.exists?t.object:null},analyzePath(e,r){try{var t=o.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=o.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=R.basename(e),t=o.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(a){n.error=a.errno}return n},createPath(e,r,t,n){e=typeof e=="string"?e:o.getPath(e);for(var a=r.split("/").reverse();a.length;){var i=a.pop();if(i){var s=R.join2(e,i);try{o.mkdir(s)}catch(l){if(l.errno!=20)throw l}e=s}}return s},createFile(e,r,t,n,a){var i=R.join2(typeof e=="string"?e:o.getPath(e),r),s=sr(n,a);return o.create(i,s)},createDataFile(e,r,t,n,a,i){var s=r;e&&(e=typeof e=="string"?e:o.getPath(e),s=r?R.join2(e,r):e);var l=sr(n,a),u=o.create(s,l);if(t){if(typeof t=="string"){for(var f=new Array(t.length),v=0,h=t.length;v<h;++v)f[v]=t.charCodeAt(v);t=f}o.chmod(u,l|146);var _=o.open(u,577);o.write(_,t,0,t.length,0,i),o.close(_),o.chmod(u,l)}},createDevice(e,r,t,n){var a=R.join2(typeof e=="string"?e:o.getPath(e),r),i=sr(!!t,!!n);o.createDevice.major??=64;var s=o.makedev(o.createDevice.major++,0);return o.registerDevice(s,{open(l){l.seekable=!1},close(l){n?.buffer?.length&&n(10)},read(l,u,f,v,h){for(var _=0,p=0;p<v;p++){var E;try{E=t()}catch{throw new o.ErrnoError(29)}if(E===void 0&&_===0)throw new o.ErrnoError(6);if(E==null)break;_++,u[f+p]=E}return _&&(l.node.atime=Date.now()),_},write(l,u,f,v,h){for(var _=0;_<v;_++)try{n(u[f+_])}catch{throw new o.ErrnoError(29)}return v&&(l.node.mtime=l.node.ctime=Date.now()),_}}),o.mkdev(a,i,s)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=Oe(e.url),e.usedBytes=e.contents.length}catch{throw new o.ErrnoError(29)}},createLazyFile(e,r,t,n,a){class i{lengthKnown=!1;chunks=[];get(p){if(!(p>this.length-1||p<0)){var E=p%this.chunkSize,F=p/this.chunkSize|0;return this.getter(F)[E]}}setDataGetter(p){this.getter=p}cacheLength(){var p=new XMLHttpRequest;if(p.open("HEAD",t,!1),p.send(null),!(p.status>=200&&p.status<300||p.status===304))throw new Error("Couldn't load "+t+". Status: "+p.status);var E=Number(p.getResponseHeader("Content-length")),F,T=(F=p.getResponseHeader("Accept-Ranges"))&&F==="bytes",C=(F=p.getResponseHeader("Content-Encoding"))&&F==="gzip",z=1024*1024;T||(z=E);var M=(W,K)=>{if(W>K)throw new Error("invalid range ("+W+", "+K+") or no bytes requested!");if(K>E-1)throw new Error("only "+E+" bytes available! programmer error!");var U=new XMLHttpRequest;if(U.open("GET",t,!1),E!==z&&U.setRequestHeader("Range","bytes="+W+"-"+K),U.responseType="arraybuffer",U.overrideMimeType&&U.overrideMimeType("text/plain; charset=x-user-defined"),U.send(null),!(U.status>=200&&U.status<300||U.status===304))throw new Error("Couldn't load "+t+". Status: "+U.status);return U.response!==void 0?new Uint8Array(U.response||[]):or(U.responseText||"")},V=this;V.setDataGetter(W=>{var K=W*z,U=(W+1)*z-1;if(U=Math.min(U,E-1),typeof V.chunks[W]>"u"&&(V.chunks[W]=M(K,U)),typeof V.chunks[W]>"u")throw new Error("doXHR failed!");return V.chunks[W]}),(C||!E)&&(z=E=1,E=this.getter(0).length,z=E,me("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=E,this._chunkSize=z,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s,l}else var l={isDevice:!1,url:t};var u=o.createFile(e,r,l,n,a);l.contents?u.contents=l.contents:l.url&&(u.contents=null,u.url=l.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var f={},v=Object.keys(u.stream_ops);v.forEach(_=>{var p=u.stream_ops[_];f[_]=(...E)=>(o.forceLoadFile(u),p(...E))});function h(_,p,E,F,T){var C=_.node.contents;if(T>=C.length)return 0;var z=Math.min(C.length-T,F);if(C.slice)for(var M=0;M<z;M++)p[E+M]=C[T+M];else for(var M=0;M<z;M++)p[E+M]=C.get(T+M);return z}return f.read=(_,p,E,F,T)=>(o.forceLoadFile(u),h(_,p,E,F,T)),f.mmap=(_,p,E,F,T)=>{o.forceLoadFile(u);var C=Wr(p);if(!C)throw new o.ErrnoError(48);return h(_,k,C,p,E),{ptr:C,allocated:!0}},u.stream_ops=f,u}},B={DEFAULT_POLLMASK:5,calculateAt(e,r,t){if(R.isAbs(r))return r;var n;if(e===-100)n=o.cwd();else{var a=B.getStreamFromFD(e);n=a.path}if(r.length==0){if(!t)throw new o.ErrnoError(44);return n}return n+"/"+r},writeStat(e,r){m[e>>2]=r.dev,m[e+4>>2]=r.mode,S[e+8>>2]=r.nlink,m[e+12>>2]=r.uid,m[e+16>>2]=r.gid,m[e+20>>2]=r.rdev,Q[e+24>>3]=BigInt(r.size),m[e+32>>2]=4096,m[e+36>>2]=r.blocks;var t=r.atime.getTime(),n=r.mtime.getTime(),a=r.ctime.getTime();return Q[e+40>>3]=BigInt(Math.floor(t/1e3)),S[e+48>>2]=t%1e3*1e3*1e3,Q[e+56>>3]=BigInt(Math.floor(n/1e3)),S[e+64>>2]=n%1e3*1e3*1e3,Q[e+72>>3]=BigInt(Math.floor(a/1e3)),S[e+80>>2]=a%1e3*1e3*1e3,Q[e+88>>3]=BigInt(r.ino),0},writeStatFs(e,r){m[e+4>>2]=r.bsize,m[e+40>>2]=r.bsize,m[e+8>>2]=r.blocks,m[e+12>>2]=r.bfree,m[e+16>>2]=r.bavail,m[e+20>>2]=r.files,m[e+24>>2]=r.ffree,m[e+28>>2]=r.fsid,m[e+44>>2]=r.flags,m[e+36>>2]=r.namelen},doMsync(e,r,t,n,a){if(!o.isFile(r.node.mode))throw new o.ErrnoError(43);if(n&2)return 0;var i=A.slice(e,e+t);o.msync(r,i,a,t,n)},getStreamFromFD(e){var r=o.getStreamChecked(e);return r},varargs:void 0,getStr(e){var r=J(e);return r}};function nn(e){try{return e=B.getStr(e),o.chdir(e),0}catch(r){if(typeof o>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function an(e,r){try{return e=B.getStr(e),o.chmod(e,r),0}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function on(e,r,t,n){try{if(r=B.getStr(r),r=B.calculateAt(e,r),t&-8)return-28;var a=o.lookupPath(r,{follow:!0}),i=a.node;if(!i)return-44;var s="";return t&4&&(s+="r"),t&2&&(s+="w"),t&1&&(s+="x"),s&&o.nodePermissions(i,s)?-2:0}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}var He=()=>{var e=m[+B.varargs>>2];return B.varargs+=4,e},Ee=He;function sn(e,r,t){B.varargs=t;try{var n=B.getStreamFromFD(e);switch(r){case 0:{var a=He();if(a<0)return-28;for(;o.streams[a];)a++;var i;return i=o.dupStream(n,a),i.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var a=He();return n.flags|=a,0}case 12:{var a=Ee(),s=0;return O[a+s>>1]=2,0}case 13:case 14:return 0}return-28}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function ln(e,r){try{return B.writeStat(r,o.fstat(e))}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}var G=(e,r,t)=>Ur(e,A,r,t);function un(e,r){try{if(r===0)return-28;var t=o.cwd(),n=fe(t)+1;return r<n?-68:(G(t,e,r),n)}catch(a){if(typeof o>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function cn(e,r,t){try{var n=B.getStreamFromFD(e);n.getdents||=o.readdir(n.path);for(var a=280,i=0,s=o.llseek(n,0,1),l=Math.floor(s/a),u=Math.min(n.getdents.length,l+Math.floor(t/a)),f=l;f<u;f++){var v,h,_=n.getdents[f];if(_===".")v=n.node.id,h=4;else if(_===".."){var p=o.lookupPath(n.path,{parent:!0});v=p.node.id,h=4}else{var E;try{E=o.lookupNode(n.node,_)}catch(F){if(F?.errno===28)continue;throw F}v=E.id,h=o.isChrdev(E.mode)?2:o.isDir(E.mode)?4:o.isLink(E.mode)?10:8}Q[r+i>>3]=BigInt(v),Q[r+i+8>>3]=BigInt((f+1)*a),O[r+i+16>>1]=280,k[r+i+18]=h,G(_,r+i+19,256),i+=a}return o.llseek(n,f*a,0),i}catch(F){if(typeof o>"u"||F.name!=="ErrnoError")throw F;return-F.errno}}function fn(e,r,t){B.varargs=t;try{var n=B.getStreamFromFD(e);switch(r){case 21509:return n.tty?0:-59;case 21505:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var a=n.tty.ops.ioctl_tcgets(n),i=Ee();m[i>>2]=a.c_iflag||0,m[i+4>>2]=a.c_oflag||0,m[i+8>>2]=a.c_cflag||0,m[i+12>>2]=a.c_lflag||0;for(var s=0;s<32;s++)k[i+s+17]=a.c_cc[s]||0;return 0}return 0}case 21510:case 21511:case 21512:return n.tty?0:-59;case 21506:case 21507:case 21508:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){for(var i=Ee(),l=m[i>>2],u=m[i+4>>2],f=m[i+8>>2],v=m[i+12>>2],h=[],s=0;s<32;s++)h.push(k[i+s+17]);return n.tty.ops.ioctl_tcsets(n.tty,r,{c_iflag:l,c_oflag:u,c_cflag:f,c_lflag:v,c_cc:h})}return 0}case 21519:{if(!n.tty)return-59;var i=Ee();return m[i>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var i=Ee();return o.ioctl(n,r,i)}case 21523:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var _=n.tty.ops.ioctl_tiocgwinsz(n.tty),i=Ee();O[i>>1]=_[0],O[i+2>>1]=_[1]}return 0}case 21524:return n.tty?0:-59;case 21515:return n.tty?0:-59;default:return-28}}catch(p){if(typeof o>"u"||p.name!=="ErrnoError")throw p;return-p.errno}}function dn(e,r){try{return e=B.getStr(e),B.writeStat(r,o.lstat(e))}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function vn(e,r,t){try{return r=B.getStr(r),r=B.calculateAt(e,r),o.mkdir(r,t,0),0}catch(n){if(typeof o>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function mn(e,r,t,n){try{r=B.getStr(r);var a=n&256,i=n&4096;return n=n&-6401,r=B.calculateAt(e,r,i),B.writeStat(t,a?o.lstat(r):o.stat(r))}catch(s){if(typeof o>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function gn(e,r,t,n){B.varargs=n;try{r=B.getStr(r),r=B.calculateAt(e,r);var a=n?He():0;return o.open(r,t,a).fd}catch(i){if(typeof o>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function hn(e,r,t,n){try{if(r=B.getStr(r),r=B.calculateAt(e,r),n<=0)return-28;var a=o.readlink(r),i=Math.min(n,fe(a)),s=k[t+i];return G(a,t,n+1),k[t+i]=s,i}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function pn(e){try{return e=B.getStr(e),o.rmdir(e),0}catch(r){if(typeof o>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function _n(e,r){try{return e=B.getStr(e),B.writeStat(r,o.stat(e))}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function yn(e,r,t){try{if(r=B.getStr(r),r=B.calculateAt(e,r),!t)o.unlink(r);else if(t===512)o.rmdir(r);else return-28;return 0}catch(n){if(typeof o>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Vr=()=>It,lr=e=>{var r=e.getArg(Vr(),0);return Mt(r)},ur=()=>Lt(),cr=e=>Tt(e),Ge=e=>At(e),wn=e=>{var r=ur(),t=Ge(4),n=Ge(4);$t(e,t,n);var a=S[t>>2],i=S[n>>2],s=J(a);ae(a);var l;return i&&(l=J(i),ae(i)),cr(r),[s,l]},Nr=e=>{var r=lr(e);return wn(r)},En=e=>{var r=new WebAssembly.Exception(Vr(),[e],{traceStack:!0});throw r.message=Nr(r),r},bn=()=>ze(""),re=e=>{for(var r="";;){var t=A[e++];if(!t)return r;r+=String.fromCharCode(t)}},be={},ke={},Ve={},Ne=class extends Error{constructor(r){super(r),this.name="BindingError"}},L=e=>{throw new Ne(e)};function kn(e,r,t={}){var n=r.name;if(e||L(`type "${n}" must have a positive integer typeid pointer`),ke.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;L(`Cannot register type '${n}' twice`)}if(ke[e]=r,delete Ve[e],be.hasOwnProperty(e)){var a=be[e];delete be[e],a.forEach(i=>i())}}function ie(e,r,t={}){return kn(e,r,t)}var jr=(e,r,t)=>{switch(r){case 1:return t?n=>k[n]:n=>A[n];case 2:return t?n=>O[n>>1]:n=>ee[n>>1];case 4:return t?n=>m[n>>2]:n=>S[n>>2];case 8:return t?n=>Q[n>>3]:n=>Br[n>>3];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},Cn=(e,r,t,n,a)=>{r=re(r);const i=n===0n;let s=l=>l;if(i){const l=t*8;s=u=>BigInt.asUintN(l,u),a=s(a)}ie(e,{name:r,fromWireType:s,toWireType:(l,u)=>(typeof u=="number"&&(u=BigInt(u)),u),argPackAdvance:ue,readValueFromPointer:jr(r,t,!i),destructorFunction:null})},ue=8,Pn=(e,r,t,n)=>{r=re(r),ie(e,{name:r,fromWireType:function(a){return!!a},toWireType:function(a,i){return i?t:n},argPackAdvance:ue,readValueFromPointer:function(a){return this.fromWireType(A[a])},destructorFunction:null})},xn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),fr=e=>{function r(t){return t.$$.ptrType.registeredClass.name}L(r(e)+" instance already deleted")},dr=!1,qr=e=>{},Sn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Xr=e=>{e.count.value-=1;var r=e.count.value===0;r&&Sn(e)},Ae=e=>typeof FinalizationRegistry>"u"?(Ae=r=>r,e):(dr=new FinalizationRegistry(r=>{Xr(r.$$)}),Ae=r=>{var t=r.$$,n=!!t.smartPtr;if(n){var a={$$:t};dr.register(r,a,r)}return r},qr=r=>dr.unregister(r),Ae(e)),Fn=()=>{let e=je.prototype;Object.assign(e,{isAliasOf(t){if(!(this instanceof je)||!(t instanceof je))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;t.$$=t.$$;for(var i=t.$$.ptrType.registeredClass,s=t.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return n===i&&a===s},clone(){if(this.$$.ptr||fr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Ae(Object.create(Object.getPrototypeOf(this),{$$:{value:xn(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||fr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),qr(this),Xr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||fr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const r=Symbol.dispose;r&&(e[r]=e.delete)};function je(){}var Yr=(e,r)=>Object.defineProperty(r,"name",{value:e}),Kr={},vr=(e,r,t)=>{if(e[r].overloadTable===void 0){var n=e[r];e[r]=function(...a){return e[r].overloadTable.hasOwnProperty(a.length)||L(`Function '${t}' called with an invalid number of arguments (${a.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[a.length].apply(this,a)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}},Bn=(e,r,t)=>{g.hasOwnProperty(e)?(L(`Cannot register public name '${e}' twice`),vr(g,e,e),g[e].overloadTable.hasOwnProperty(t)&&L(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),g[e].overloadTable[t]=r):(g[e]=r,g[e].argCount=t)},Tn=48,An=57,Ln=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=Tn&&r<=An?`_${e}`:e};function Dn(e,r,t,n,a,i,s,l){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=s,this.downcast=l,this.pureVirtualFunctions=[]}var mr=(e,r,t)=>{for(;r!==t;)r.upcast||L(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e},gr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e};function Rn(e,r){if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;r.$$||L(`Cannot pass "${gr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=mr(r.$$.ptr,t,this.registeredClass);return n}function Mn(e,r){var t;if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,t),t):0;(!r||!r.$$)&&L(`Cannot pass "${gr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&L(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var n=r.$$.ptrType.registeredClass;if(t=mr(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&L("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:L(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var a=r.clone();t=this.rawShare(t,pr.toHandle(()=>a.delete())),e!==null&&e.push(this.rawDestructor,t)}break;default:L("Unsupporting sharing policy")}return t}function $n(e,r){if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;r.$$||L(`Cannot pass "${gr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&L(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=mr(r.$$.ptr,t,this.registeredClass);return n}function qe(e){return this.fromWireType(S[e>>2])}var Qr=(e,r,t)=>{if(r===t)return e;if(t.baseClass===void 0)return null;var n=Qr(e,r,t.baseClass);return n===null?null:t.downcast(n)},In={},On=(e,r)=>{for(r===void 0&&L("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},Un=(e,r)=>(r=On(e,r),In[r]),zn=class extends Error{constructor(r){super(r),this.name="InternalError"}},Xe=e=>{throw new zn(e)},Ye=(e,r)=>{(!r.ptrType||!r.ptr)&&Xe("makeClassHandle requires ptr and ptrType");var t=!!r.smartPtrType,n=!!r.smartPtr;return t!==n&&Xe("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Ae(Object.create(e,{$$:{value:r,writable:!0}}))};function Wn(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=Un(this.registeredClass,r);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Ye(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):Ye(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i=this.registeredClass.getActualType(r),s=Kr[i];if(!s)return a.call(this);var l;this.isConst?l=s.constPointerType:l=s.pointerType;var u=Qr(r,this.registeredClass,l.registeredClass);return u===null?a.call(this):this.isSmartPointer?Ye(l.registeredClass.instancePrototype,{ptrType:l,ptr:u,smartPtrType:this,smartPtr:e}):Ye(l.registeredClass.instancePrototype,{ptrType:l,ptr:u})}var Hn=()=>{Object.assign(Ke.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},argPackAdvance:ue,readValueFromPointer:qe,fromWireType:Wn})};function Ke(e,r,t,n,a,i,s,l,u,f,v){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=s,this.rawGetPointee=l,this.rawConstructor=u,this.rawShare=f,this.rawDestructor=v,!a&&r.baseClass===void 0?n?(this.toWireType=Rn,this.destructorFunction=null):(this.toWireType=$n,this.destructorFunction=null):this.toWireType=Mn}var Gn=(e,r,t)=>{g.hasOwnProperty(e)||Xe("Replacing nonexistent public symbol"),g[e].overloadTable!==void 0&&t!==void 0||(g[e]=r,g[e].argCount=t)},Ce=(e,r,t=!1)=>{e=re(e);function n(){var i=Z(r);return i}var a=n();return typeof a!="function"&&L(`unknown function pointer with signature ${e}: ${r}`),a};class Vn extends Error{}var Nn=e=>{var r=xt(e),t=re(r);return ae(r),t},hr=(e,r)=>{var t=[],n={};function a(i){if(!n[i]&&!ke[i]){if(Ve[i]){Ve[i].forEach(a);return}t.push(i),n[i]=!0}}throw r.forEach(a),new Vn(`${e}: `+t.map(Nn).join([", "]))},Le=(e,r,t)=>{e.forEach(l=>Ve[l]=r);function n(l){var u=t(l);u.length!==e.length&&Xe("Mismatched type converter count");for(var f=0;f<e.length;++f)ie(e[f],u[f])}var a=new Array(r.length),i=[],s=0;r.forEach((l,u)=>{ke.hasOwnProperty(l)?a[u]=ke[l]:(i.push(l),be.hasOwnProperty(l)||(be[l]=[]),be[l].push(()=>{a[u]=ke[l],++s,s===i.length&&n(a)}))}),i.length===0&&n(a)},jn=(e,r,t,n,a,i,s,l,u,f,v,h,_)=>{v=re(v),i=Ce(a,i),l&&=Ce(s,l),f&&=Ce(u,f),_=Ce(h,_);var p=Ln(v);Bn(p,function(){hr(`Cannot construct ${v} due to unbound types`,[n])}),Le([e,r,t],n?[n]:[],E=>{E=E[0];var F,T;n?(F=E.registeredClass,T=F.instancePrototype):T=je.prototype;var C=Yr(v,function(...U){if(Object.getPrototypeOf(this)!==z)throw new Ne(`Use 'new' to construct ${v}`);if(M.constructor_body===void 0)throw new Ne(`${v} has no accessible constructor`);var rr=M.constructor_body[U.length];if(rr===void 0)throw new Ne(`Tried to invoke ctor of ${v} with invalid number of parameters (${U.length}) - expected (${Object.keys(M.constructor_body).toString()}) parameters instead!`);return rr.apply(this,U)}),z=Object.create(T,{constructor:{value:C}});C.prototype=z;var M=new Dn(v,C,z,_,F,i,l,f);M.baseClass&&(M.baseClass.__derivedClasses??=[],M.baseClass.__derivedClasses.push(M));var V=new Ke(v,M,!0,!1,!1),W=new Ke(v+"*",M,!1,!1,!1),K=new Ke(v+" const*",M,!1,!0,!1);return Kr[e]={pointerType:W,constPointerType:K},Gn(p,C),[V,W,K]})},qn=e=>{for(;e.length;){var r=e.pop(),t=e.pop();t(r)}};function Zr(e){for(var r=1;r<e.length;++r)if(e[r]!==null&&e[r].destructorFunction===void 0)return!0;return!1}function Xn(e,r,t,n){var a=Zr(e),i=e.length-2,s=[],l=["fn"];r&&l.push("thisWired");for(var u=0;u<i;++u)s.push(`arg${u}`),l.push(`arg${u}Wired`);s=s.join(","),l=l.join(",");var f=`return function (${s}) {
`;a&&(f+=`var destructors = [];
`);var v=a?"destructors":"null",h=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];r&&(f+=`var thisWired = classParam['toWireType'](${v}, this);
`);for(var u=0;u<i;++u)f+=`var arg${u}Wired = argType${u}['toWireType'](${v}, arg${u});
`,h.push(`argType${u}`);if(f+=(t||n?"var rv = ":"")+`invoker(${l});
`,a)f+=`runDestructors(destructors);
`;else for(var u=r?1:2;u<e.length;++u){var _=u===1?"thisWired":"arg"+(u-2)+"Wired";e[u].destructorFunction!==null&&(f+=`${_}_dtor(${_});
`,h.push(`${_}_dtor`))}return t&&(f+=`var ret = retType['fromWireType'](rv);
return ret;
`),f+=`}
`,[h,f]}function Jr(e,r,t,n,a,i){var s=r.length;s<2&&L("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var l=r[1]!==null&&t!==null,u=Zr(r),f=r[0].name!=="void",v=[e,L,n,a,qn,r[0],r[1]],h=0;h<s-2;++h)v.push(r[h+2]);if(!u)for(var h=l?1:2;h<r.length;++h)r[h].destructorFunction!==null&&v.push(r[h].destructorFunction);let[_,p]=Xn(r,l,f,i);var E=new Function(..._,p)(...v);return Yr(e,E)}var et=(e,r)=>{for(var t=[],n=0;n<e;n++)t.push(S[r+n*4>>2]);return t},rt=e=>{e=e.trim();const r=e.indexOf("(");return r===-1?e:e.slice(0,r)},Yn=(e,r,t,n,a,i,s,l,u)=>{var f=et(t,n);r=re(r),r=rt(r),i=Ce(a,i,l),Le([],[e],v=>{v=v[0];var h=`${v.name}.${r}`;function _(){hr(`Cannot call ${h} due to unbound types`,f)}r.startsWith("@@")&&(r=Symbol[r.substring(2)]);var p=v.registeredClass.constructor;return p[r]===void 0?(_.argCount=t-1,p[r]=_):(vr(p,r,h),p[r].overloadTable[t-1]=_),Le([],f,E=>{var F=[E[0],null].concat(E.slice(1)),T=Jr(h,F,null,i,s,l);if(p[r].overloadTable===void 0?(T.argCount=t-1,p[r]=T):p[r].overloadTable[t-1]=T,v.registeredClass.__derivedClasses)for(const C of v.registeredClass.__derivedClasses)C.constructor.hasOwnProperty(r)||(C.constructor[r]=T);return[]}),[]})},Kn=(e,r,t,n,a,i,s,l,u,f)=>{var v=et(t,n);r=re(r),r=rt(r),i=Ce(a,i,u),Le([],[e],h=>{h=h[0];var _=`${h.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),l&&h.registeredClass.pureVirtualFunctions.push(r);function p(){hr(`Cannot call ${_} due to unbound types`,v)}var E=h.registeredClass.instancePrototype,F=E[r];return F===void 0||F.overloadTable===void 0&&F.className!==h.name&&F.argCount===t-2?(p.argCount=t-2,p.className=h.name,E[r]=p):(vr(E,r,_),E[r].overloadTable[t-2]=p),Le([],v,T=>{var C=Jr(_,T,h,i,s,u);return E[r].overloadTable===void 0?(C.argCount=t-2,E[r]=C):E[r].overloadTable[t-2]=C,[]}),[]})},tt=[],Pe=[0,1,,1,null,1,!0,1,!1,1],Qn=e=>{e>9&&--Pe[e+1]===0&&(Pe[e]=void 0,tt.push(e))},pr={toValue:e=>(e||L(`Cannot use deleted val. handle = ${e}`),Pe[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=tt.pop()||Pe.length;return Pe[r]=e,Pe[r+1]=1,r}}}},Zn={name:"emscripten::val",fromWireType:e=>{var r=pr.toValue(e);return Qn(e),r},toWireType:(e,r)=>pr.toHandle(r),argPackAdvance:ue,readValueFromPointer:qe,destructorFunction:null},Jn=e=>ie(e,Zn),ea=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(Y[t>>2])};case 8:return function(t){return this.fromWireType(ne[t>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},ra=(e,r,t)=>{r=re(r),ie(e,{name:r,fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:ue,readValueFromPointer:ea(r,t),destructorFunction:null})},ta=(e,r,t,n,a)=>{r=re(r);const i=n===0;let s=u=>u;if(i){var l=32-8*t;s=u=>u<<l>>>l,a=s(a)}ie(e,{name:r,fromWireType:s,toWireType:(u,f)=>f,argPackAdvance:ue,readValueFromPointer:jr(r,t,n!==0),destructorFunction:null})},na=(e,r,t)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],a=n[r];function i(s){var l=S[s>>2],u=S[s+4>>2];return new a(k.buffer,u,l)}t=re(t),ie(e,{name:t,fromWireType:i,argPackAdvance:ue,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},aa=(e,r)=>{r=re(r),ie(e,{name:r,fromWireType(t){for(var n=S[t>>2],a=t+4,i,s,l=a,s=0;s<=n;++s){var u=a+s;if(s==n||A[u]==0){var f=u-l,v=J(l,f);i===void 0?i=v:(i+="\0",i+=v),l=u+1}}return ae(t),i},toWireType(t,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,i=typeof n=="string";i||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||L("Cannot pass non-string to std::string"),i?a=fe(n):a=n.length;var s=te(4+a+1),l=s+4;return S[s>>2]=a,i?G(n,l,a+1):A.set(n,l),t!==null&&t.push(ae,s),s},argPackAdvance:ue,readValueFromPointer:qe,destructorFunction(t){ae(t)}})},ia=new TextDecoder("utf-16le"),oa=(e,r)=>{for(var t=e>>1,n=t+r/2,a=t;!(a>=n)&&ee[a];)++a;return ia.decode(ee.subarray(t,a))},sa=(e,r,t)=>{if(t??=2147483647,t<2)return 0;t-=2;for(var n=r,a=t<e.length*2?t/2:e.length,i=0;i<a;++i){var s=e.charCodeAt(i);O[r>>1]=s,r+=2}return O[r>>1]=0,r-n},la=e=>e.length*2,ua=(e,r)=>{for(var t="",n=0;!(n>=r/4);n++){var a=m[e+n*4>>2];if(!a)break;t+=String.fromCodePoint(a)}return t},ca=(e,r,t)=>{if(t??=2147483647,t<4)return 0;for(var n=r,a=n+t-4,i=0;i<e.length;++i){var s=e.codePointAt(i);if(s>65535&&i++,m[r>>2]=s,r+=4,r+4>a)break}return m[r>>2]=0,r-n},fa=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.codePointAt(t);n>65535&&t++,r+=4}return r},da=(e,r,t)=>{t=re(t);var n,a,i,s;r===2?(n=oa,a=sa,s=la,i=l=>ee[l>>1]):r===4&&(n=ua,a=ca,s=fa,i=l=>S[l>>2]),ie(e,{name:t,fromWireType:l=>{for(var u=S[l>>2],f,v=l+4,h=0;h<=u;++h){var _=l+4+h*r;if(h==u||i(_)==0){var p=_-v,E=n(v,p);f===void 0?f=E:(f+="\0",f+=E),v=_+r}}return ae(l),f},toWireType:(l,u)=>{typeof u!="string"&&L(`Cannot pass non-string to C++ string type ${t}`);var f=s(u),v=te(4+f+r);return S[v>>2]=f/r,a(u,v+4,f+r),l!==null&&l.push(ae,v),v},argPackAdvance:ue,readValueFromPointer:qe,destructorFunction(l){ae(l)}})},va=(e,r)=>{r=re(r),ie(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(t,n)=>{}})},nt=e=>{for(var r=e.split("."),t=0;t<4;t++){var n=Number(r[t]);if(isNaN(n))return null;r[t]=n}return(r[0]|r[1]<<8|r[2]<<16|r[3]<<24)>>>0},ma=e=>{var r,t,n,a,i=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,s=[];if(!i.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];for(e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),r=e.split(":"),r[r.length-4]=Number(r[r.length-4])+Number(r[r.length-3])*256,r[r.length-3]=Number(r[r.length-2])+Number(r[r.length-1])*256,r=r.slice(0,r.length-2)):r=e.split(":"),n=0,a=0,t=0;t<r.length;t++)if(typeof r[t]=="string")if(r[t]==="Z"){for(a=0;a<8-r.length+1;a++)s[t+a]=0;n=a-1}else s[t+n]=St(parseInt(r[t],16));else s[t+n]=r[t];return[s[1]<<16|s[0],s[3]<<16|s[2],s[5]<<16|s[4],s[7]<<16|s[6]]},de={address_map:{id:1,addrs:{},names:{}},lookup_name(e){var r=nt(e);if(r!==null||(r=ma(e),r!==null))return e;var t;if(de.address_map.addrs[e])t=de.address_map.addrs[e];else{var n=de.address_map.id++;D(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(n&255)+"."+(n&65280),de.address_map.names[t]=e,de.address_map.addrs[e]=t}return t},lookup_addr(e){return de.address_map.names[e]?de.address_map.names[e]:null}},ga=e=>{var r=J(e);return nt(de.lookup_name(r))},ha=e=>e%4===0&&(e%100!==0||e%400===0),pa=[0,31,60,91,121,152,182,213,244,274,305,335],_a=[0,31,59,90,120,151,181,212,243,273,304,334],ya=e=>{var r=ha(e.getFullYear()),t=r?pa:_a,n=t[e.getMonth()]+e.getDate()-1;return n},wa=9007199254740992,Ea=-9007199254740992,Qe=e=>e<Ea||e>wa?NaN:Number(e);function ba(e,r){e=Qe(e);var t=new Date(e*1e3);m[r>>2]=t.getSeconds(),m[r+4>>2]=t.getMinutes(),m[r+8>>2]=t.getHours(),m[r+12>>2]=t.getDate(),m[r+16>>2]=t.getMonth(),m[r+20>>2]=t.getFullYear()-1900,m[r+24>>2]=t.getDay();var n=ya(t)|0;m[r+28>>2]=n,m[r+36>>2]=-(t.getTimezoneOffset()*60);var a=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=a.getTimezoneOffset(),l=(i!=s&&t.getTimezoneOffset()==Math.min(s,i))|0;m[r+32>>2]=l}function ka(e,r,t,n,a,i,s){a=Qe(a);try{var l=B.getStreamFromFD(n),u=o.mmap(l,e,a,r,t),f=u.ptr;return m[i>>2]=u.allocated,S[s>>2]=f,0}catch(v){if(typeof o>"u"||v.name!=="ErrnoError")throw v;return-v.errno}}function Ca(e,r,t,n,a,i){i=Qe(i);try{var s=B.getStreamFromFD(a);t&2&&B.doMsync(e,s,r,n,i)}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}var Pa=(e,r,t,n)=>{var a=new Date().getFullYear(),i=new Date(a,0,1),s=new Date(a,6,1),l=i.getTimezoneOffset(),u=s.getTimezoneOffset(),f=Math.max(l,u);S[e>>2]=f*60,m[r>>2]=+(l!=u);var v=p=>{var E=p>=0?"-":"+",F=Math.abs(p),T=String(Math.floor(F/60)).padStart(2,"0"),C=String(F%60).padStart(2,"0");return`UTC${E}${T}${C}`},h=v(l),_=v(u);u<l?(G(h,t,17),G(_,n,17)):(G(h,n,17),G(_,t,17))},_r=()=>performance.now(),at=()=>Date.now(),xa=e=>e>=0&&e<=3;function Sa(e,r,t){if(!xa(e))return 28;var n;e===0?n=at():n=_r();var a=Math.round(n*1e3*1e3);return Q[t>>3]=BigInt(a),0}var yr=[],Fa=(e,r)=>{yr.length=0;for(var t;t=A[e++];){var n=t!=105;n&=t!=112,r+=n&&r%8?4:0,yr.push(t==112?S[r>>2]:t==106?Q[r>>3]:t==105?m[r>>2]:ne[r>>3]),r+=n?8:4}return yr},Ba=(e,r,t,n)=>{var a=Fa(r,t);return il[e](...a)},Ta=(e,r,t)=>Ba(e,r,t),Ze=(e,r)=>{if(w.timingMode=e,w.timingValue=r,!w.func)return 1;if(w.running||(w.running=!0),e==0)w.scheduler=function(){var s=Math.max(0,w.tickStartTime+r-_r())|0;setTimeout(w.runner,s)},w.method="timeout";else if(e==1)w.scheduler=function(){w.requestAnimationFrame(w.runner)},w.method="rAF";else if(e==2){if(typeof w.setImmediate>"u")if(typeof setImmediate>"u"){var t=[],n="setimmediate",a=i=>{(i.data===n||i.data.target===n)&&(i.stopPropagation(),t.shift()())};addEventListener("message",a,!0),w.setImmediate=i=>{t.push(i),postMessage(n,"*")}}else w.setImmediate=setImmediate;w.scheduler=function(){w.setImmediate(w.runner)},w.method="immediate"}return 0},Aa=0,it=()=>$r||Aa>0,La=e=>{he=e,it()||(g.onExit?.(e),ce=!0),N(e,new Ar(e))},Da=(e,r)=>{he=e,La(e)},ot=Da,st=e=>{if(e instanceof Ar||e=="unwind")return he;N(1,e)},lt=()=>{if(!it())try{ot(he)}catch(e){st(e)}},ut=(e,r,t,n,a)=>{w.func=e,w.arg=n;var i=w.currentlyRunningMainloop;function s(){return i<w.currentlyRunningMainloop?(lt(),!1):!0}if(w.running=!1,w.runner=function(){if(!ce){if(w.queue.length>0){var u=w.queue.shift();if(u.func(u.arg),w.remainingBlockers){var f=w.remainingBlockers,v=f%1==0?f-1:Math.floor(f);u.counted?w.remainingBlockers=v:(v=v+.5,w.remainingBlockers=(8*f+v)/9)}if(w.updateStatus(),!s())return;setTimeout(w.runner,0);return}if(s()){if(w.currentFrameNumber=w.currentFrameNumber+1|0,w.timingMode==1&&w.timingValue>1&&w.currentFrameNumber%w.timingValue!=0){w.scheduler();return}else w.timingMode==0&&(w.tickStartTime=_r());w.runIter(e),s()&&w.scheduler()}}},a||(r>0?Ze(0,1e3/r):Ze(1,1),w.scheduler()),t)throw"unwind"},ct=e=>{if(!ce)try{e(),lt()}catch(r){st(r)}},w={running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],preMainLoop:[],postMainLoop:[],pause(){w.scheduler=null,w.currentlyRunningMainloop++},resume(){w.currentlyRunningMainloop++;var e=w.timingMode,r=w.timingValue,t=w.func;w.func=null,ut(t,0,!1,w.arg,!0),Ze(e,r),w.scheduler()},updateStatus(){if(g.setStatus){var e=g.statusMessage||"Please wait...",r=w.remainingBlockers??0,t=w.expectedBlockers??0;r?r<t?g.setStatus("{message} ({expected - remaining}/{expected})"):g.setStatus(e):g.setStatus("")}},init(){g.preMainLoop&&w.preMainLoop.push(g.preMainLoop),g.postMainLoop&&w.postMainLoop.push(g.postMainLoop)},runIter(e){if(!ce){for(var r of w.preMainLoop)if(r()===!1)return;ct(e);for(var t of w.postMainLoop)t()}},nextRAF:0,fakeRequestAnimationFrame(e){var r=Date.now();if(w.nextRAF===0)w.nextRAF=r+1e3/60;else for(;r+2>=w.nextRAF;)w.nextRAF+=1e3/60;var t=Math.max(w.nextRAF-r,0);setTimeout(e,t)},requestAnimationFrame(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var r=w.fakeRequestAnimationFrame;r(e)}},Ra=()=>{w.pause(),w.func=null},b={memcpy(e,r,t){k.set(k.subarray(r,r+t),e)},removeAllEventListeners(){for(;b.eventHandlers.length;)b._removeHandler(b.eventHandlers.length-1);b.deferredCalls=[]},inEventHandler:0,deferredCalls:[],deferCall(e,r,t){function n(i,s){if(i.length!=s.length)return!1;for(var l in i)if(i[l]!=s[l])return!1;return!0}for(var a of b.deferredCalls)if(a.targetFunction==e&&n(a.argsList,t))return;b.deferredCalls.push({targetFunction:e,precedence:r,argsList:t}),b.deferredCalls.sort((i,s)=>i.precedence<s.precedence)},removeDeferredCalls(e){b.deferredCalls=b.deferredCalls.filter(r=>r.targetFunction!=e)},canPerformEventHandlerRequests(){return navigator.userActivation?navigator.userActivation.isActive:b.inEventHandler&&b.currentEventHandler.allowsDeferredCalls},runDeferredCalls(){if(b.canPerformEventHandlerRequests()){var e=b.deferredCalls;b.deferredCalls=[];for(var r of e)r.targetFunction(...r.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:(e,r)=>{for(var t=0;t<b.eventHandlers.length;++t)b.eventHandlers[t].target==e&&(!r||r==b.eventHandlers[t].eventTypeString)&&b._removeHandler(t--)},_removeHandler(e){var r=b.eventHandlers[e];r.target.removeEventListener(r.eventTypeString,r.eventListenerFunc,r.useCapture),b.eventHandlers.splice(e,1)},registerOrRemoveHandler(e){if(!e.target)return-4;if(e.callbackfunc)e.eventListenerFunc=function(t){++b.inEventHandler,b.currentEventHandler=e,b.runDeferredCalls(),e.handlerFunc(t),b.runDeferredCalls(),--b.inEventHandler},e.target.addEventListener(e.eventTypeString,e.eventListenerFunc,e.useCapture),b.eventHandlers.push(e);else for(var r=0;r<b.eventHandlers.length;++r)b.eventHandlers[r].target==e.target&&b.eventHandlers[r].eventTypeString==e.eventTypeString&&b._removeHandler(r--);return 0},getNodeNameForTarget(e){return e?e==window?"#window":e==screen?"#screen":e?.nodeName||"":""},fullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},wr=[0,document,window],Ma=e=>e>2?J(e):e,ve=e=>{e=Ma(e);var r=wr[e]||document.querySelector(e);return r},xe=ve,$a=(e,r,t)=>{var n=xe(e);if(!n)return-4;m[r>>2]=n.width,m[t>>2]=n.height},ft=e=>{var r=fe(e)+1,t=Ge(r);return G(e,t,r),t},dt=e=>{var r=ur(),t=Ge(8),n=t+4,a=ft(e.id);$a(a,t,n);var i=[m[t>>2],m[n>>2]];return cr(r),i},vt=(e,r,t)=>{var n=xe(e);return n?(n.width=r,n.height=t,0):-4},mt=(e,r,t)=>{if(!e.controlTransferredOffscreen)e.width=r,e.height=t;else{var n=ur(),a=ft(e.id);vt(a,r,t),cr(n)}},Je={},Ia=e=>{var r=dt(e),t=r[0],n=r[1],a=e.style.width,i=e.style.height,s=e.style.backgroundColor,l=document.body.style.backgroundColor,u=e.style.paddingLeft,f=e.style.paddingRight,v=e.style.paddingTop,h=e.style.paddingBottom,_=e.style.marginLeft,p=e.style.marginRight,E=e.style.marginTop,F=e.style.marginBottom,T=document.body.style.margin,C=document.documentElement.style.overflow,z=document.body.scroll,M=e.style.imageRendering;function V(){var W=document.fullscreenElement||document.webkitFullscreenElement;W||(document.removeEventListener("fullscreenchange",V),document.removeEventListener("webkitfullscreenchange",V),mt(e,t,n),e.style.width=a,e.style.height=i,e.style.backgroundColor=s,l||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=l,e.style.paddingLeft=u,e.style.paddingRight=f,e.style.paddingTop=v,e.style.paddingBottom=h,e.style.marginLeft=_,e.style.marginRight=p,e.style.marginTop=E,e.style.marginBottom=F,document.body.style.margin=T,document.documentElement.style.overflow=C,document.body.scroll=z,e.style.imageRendering=M,e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,t,n),Je.canvasResizedCallback&&Z(Je.canvasResizedCallback)(37,0,Je.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",V),document.addEventListener("webkitfullscreenchange",V),V},Er=(e,r,t)=>{e.style.paddingLeft=e.style.paddingRight=t+"px",e.style.paddingTop=e.style.paddingBottom=r+"px"},br=e=>wr.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0},Oa=(e,r)=>{var t=Ia(e),n=r.softFullscreen?innerWidth:screen.width,a=r.softFullscreen?innerHeight:screen.height,i=br(e),s=i.width,l=i.height,u=dt(e),f=u[0],v=u[1];if(r.scaleMode==3)Er(e,(a-l)/2,(n-s)/2),n=s,a=l;else if(r.scaleMode==2)if(n*v<f*a){var h=v*n/f;Er(e,(a-h)/2,0),a=h}else{var _=f*a/v;Er(e,0,(n-_)/2),n=_}e.style.backgroundColor||="black",document.body.style.backgroundColor||="black",e.style.width=n+"px",e.style.height=a+"px",r.filteringMode==1&&(e.style.imageRendering="optimizeSpeed",e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="optimize-contrast",e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated");var p=r.canvasResolutionScaleMode==2?devicePixelRatio:1;if(r.canvasResolutionScaleMode!=0){var E=n*p|0,F=a*p|0;mt(e,E,F),e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,E,F)}return t},kr=(e,r)=>{if((r.scaleMode!=0||r.canvasResolutionScaleMode!=0)&&Oa(e,r),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else return b.fullscreenEnabled()?-3:-1;return Je=r,r.canvasResizedCallback&&Z(r.canvasResizedCallback)(37,0,r.canvasResizedCallbackUserData),0},Ua=()=>{if(!b.fullscreenEnabled())return-1;b.removeDeferredCalls(kr);var e=wr[1];if(e.exitFullscreen)e.fullscreenElement&&e.exitFullscreen();else if(e.webkitExitFullscreen)e.webkitFullscreenElement&&e.webkitExitFullscreen();else return-1;return 0},za=()=>new Error().stack.toString(),Wa=e=>{var r=za(),t=r.split(`
`);r="";var n=new RegExp("\\s*(.*?)@(.*?):([0-9]+):([0-9]+)"),a=new RegExp("\\s*at (.*?) \\((.*):(.*):(.*)\\)");for(var i of t){var s="",l="",u=0,f=0,v=a.exec(i);if(v?.length==5)s=v[1],l=v[2],u=v[3],f=v[4];else if(v=n.exec(i),v?.length>=4)s=v[1],l=v[2],u=v[3],f=v[4]|0;else{r+=i+`
`;continue}if(s=="_emscripten_log"||s=="_emscripten_get_callstack"){r="";continue}e&24&&(e&64&&(l=l.substring(l.replace(/\\/g,"/").lastIndexOf("/")+1)),r+=`    at ${s} (${l}:${u}:${f})
`)}return r=r.replace(/\s+$/,""),r},Ha=(e,r,t)=>{var n=Wa(e);if(!r||t<=0)return fe(n)+1;var a=G(n,r,t);return a+1},Ga=()=>devicePixelRatio,gt=()=>2147483648,Va=()=>gt(),ht=(e,r)=>setTimeout(()=>{ct(e)},r),y={useWebGL:!1,isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],preloadedImages:{},preloadedAudios:{},getCanvas:()=>g.canvas,init(){if(y.initted)return;y.initted=!0;var e={};e.canHandle=function(i){return!g.noImageDecoding&&/\.(jpg|jpeg|png|bmp|webp)$/i.test(i)},e.handle=function(i,s,l,u){var f=new Blob([i],{type:y.getMimetype(s)});f.size!==i.length&&(f=new Blob([new Uint8Array(i).buffer],{type:y.getMimetype(s)}));var v=URL.createObjectURL(f),h=new Image;h.onload=()=>{var _=document.createElement("canvas");_.width=h.width,_.height=h.height;var p=_.getContext("2d");p.drawImage(h,0,0),y.preloadedImages[s]=_,URL.revokeObjectURL(v),l?.(i)},h.onerror=_=>{H(`Image ${v} could not be decoded`),u?.()},h.src=v},We.push(e);var r={};r.canHandle=function(i){return!g.noAudioDecoding&&i.slice(-4)in{".ogg":1,".wav":1,".mp3":1}},r.handle=function(i,s,l,u){var f=!1;function v(E){f||(f=!0,y.preloadedAudios[s]=E,l?.(i))}var h=new Blob([i],{type:y.getMimetype(s)}),_=URL.createObjectURL(h),p=new Audio;p.addEventListener("canplaythrough",()=>v(p),!1),p.onerror=function(F){if(f)return;H(`warning: browser could not fully decode audio ${s}, trying slower base64 approach`);function T(C){for(var z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M="=",V="",W=0,K=0,U=0;U<C.length;U++)for(W=W<<8|C[U],K+=8;K>=6;){var rr=W>>K-6&63;K-=6,V+=z[rr]}return K==2?(V+=z[(W&3)<<4],V+=M+M):K==4&&(V+=z[(W&15)<<2],V+=M),V}p.src="data:audio/x-"+s.slice(-3)+";base64,"+T(i),v(p)},p.src=_,ht(()=>{v(p)},1e4)},We.push(r);function t(){var a=y.getCanvas();y.pointerLock=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a||document.msPointerLockElement===a}var n=y.getCanvas();n&&(n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock||n.msRequestPointerLock||(()=>{}),n.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),n.exitPointerLock=n.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("mspointerlockchange",t,!1),g.elementPointerLock&&n.addEventListener("click",a=>{!y.pointerLock&&y.getCanvas().requestPointerLock&&(y.getCanvas().requestPointerLock(),a.preventDefault())},!1))},createContext(e,r,t,n){if(r&&g.ctx&&e==y.getCanvas())return g.ctx;var a,i;if(r){var s={antialias:!1,alpha:!1,majorVersion:2};if(n)for(var l in n)s[l]=n[l];typeof c<"u"&&(i=c.createContext(e,s),i&&(a=c.getContext(i).GLctx))}else a=e.getContext("2d");return a?(t&&(g.ctx=a,r&&c.makeContextCurrent(i),y.useWebGL=r,y.moduleContextCreatedCallbacks.forEach(u=>u()),y.init()),a):null},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,r){y.lockPointer=e,y.resizeCanvas=r,typeof y.lockPointer>"u"&&(y.lockPointer=!0),typeof y.resizeCanvas>"u"&&(y.resizeCanvas=!1);var t=y.getCanvas();function n(){y.isFullscreen=!1;var i=t.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===i?(t.exitFullscreen=y.exitFullscreen,y.lockPointer&&t.requestPointerLock(),y.isFullscreen=!0,y.resizeCanvas?y.setFullscreenCanvasSize():y.updateCanvasDimensions(t)):(i.parentNode.insertBefore(t,i),i.parentNode.removeChild(i),y.resizeCanvas?y.setWindowedCanvasSize():y.updateCanvasDimensions(t)),g.onFullScreen?.(y.isFullscreen),g.onFullscreen?.(y.isFullscreen)}y.fullscreenHandlersInstalled||(y.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var a=document.createElement("div");t.parentNode.insertBefore(a,t),a.appendChild(t),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?()=>a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(a.webkitRequestFullScreen?()=>a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),a.requestFullscreen()},exitFullscreen(){if(!y.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return e.apply(document,[]),!0},safeSetTimeout(e,r){return ht(e,r)},getMimetype(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.slice(e.lastIndexOf(".")+1)]},getUserMedia(e){window.getUserMedia||=navigator.getUserMedia||navigator.mozGetUserMedia,window.getUserMedia(e)},getMovementX(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta(e){var r=0;switch(e.type){case"DOMMouseScroll":r=e.detail/3;break;case"mousewheel":r=e.wheelDelta/120;break;case"wheel":switch(r=e.deltaY,e.deltaMode){case 0:r/=100;break;case 1:r/=3;break;case 2:r*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return r},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseCoords(e,r){var t=y.getCanvas(),n=t.getBoundingClientRect(),a=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,i=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset,s=e-(a+n.left),l=r-(i+n.top);return s=s*(t.width/n.width),l=l*(t.height/n.height),{x:s,y:l}},setMouseCoords(e,r){const{x:t,y:n}=y.calculateMouseCoords(e,r);y.mouseMovementX=t-y.mouseX,y.mouseMovementY=n-y.mouseY,y.mouseX=t,y.mouseY=n},calculateMouseEvent(e){if(y.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?y.mouseMovementX=y.mouseMovementY=0:(y.mouseMovementX=y.getMovementX(e),y.mouseMovementY=y.getMovementY(e)),y.mouseX+=y.mouseMovementX,y.mouseY+=y.mouseMovementY;else{if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var r=e.touch;if(r===void 0)return;var t=y.calculateMouseCoords(r.pageX,r.pageY);if(e.type==="touchstart")y.lastTouches[r.identifier]=t,y.touches[r.identifier]=t;else if(e.type==="touchend"||e.type==="touchmove"){var n=y.touches[r.identifier];n||=t,y.lastTouches[r.identifier]=n,y.touches[r.identifier]=t}return}y.setMouseCoords(e.pageX,e.pageY)}},resizeListeners:[],updateResizeListeners(){var e=y.getCanvas();y.resizeListeners.forEach(r=>r(e.width,e.height))},setCanvasSize(e,r,t){var n=y.getCanvas();y.updateCanvasDimensions(n,e,r),t||y.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL<"u"){var e=S[SDL.screen>>2];e=e|8388608,m[SDL.screen>>2]=e}y.updateCanvasDimensions(y.getCanvas()),y.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL<"u"){var e=S[SDL.screen>>2];e=e&-8388609,m[SDL.screen>>2]=e}y.updateCanvasDimensions(y.getCanvas()),y.updateResizeListeners()},updateCanvasDimensions(e,r,t){r&&t?(e.widthNative=r,e.heightNative=t):(r=e.widthNative,t=e.heightNative);var n=r,a=t;if(g.forcedAspectRatio>0&&(n/a<g.forcedAspectRatio?n=Math.round(a*g.forcedAspectRatio):a=Math.round(n/g.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var i=Math.min(screen.width/n,screen.height/a);n=Math.round(n*i),a=Math.round(a*i)}y.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=a&&(e.height=a),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=r&&(e.width=r),e.height!=t&&(e.height=t),typeof e.style<"u"&&(n!=r||a!=t?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},Na=(e,r,t)=>{e=_e.resolve(e);var n=y.preloadedImages[e];if(!n)return 0;var a=n.getContext("2d"),i=a.getImageData(0,0,n.width,n.height),s=te(n.width*n.height*4);return A.set(i.data,s),m[r>>2]=n.width,m[t>>2]=n.height,s},ja=(e,r,t)=>Na(J(e),r,t),qa=(e,r)=>{m[e>>2]=screen.width,m[r>>2]=screen.height},Xa=()=>0,Ya=(e,r)=>b.fullscreenEnabled()?(e=ve(e),e?!e.requestFullscreen&&!e.webkitRequestFullscreen?-3:b.canPerformEventHandlerRequests()?kr(e,r):r.deferUntilInEventHandler?(b.deferCall(kr,1,[e,r]),1):-2:-4):-1,Ka=(e,r,t)=>{var n={scaleMode:m[t>>2],canvasResolutionScaleMode:m[t+4>>2],filteringMode:m[t+8>>2],deferUntilInEventHandler:r,canvasResizedCallback:m[t+12>>2],canvasResizedCallbackUserData:m[t+16>>2]};return Ya(e,n)},Qa=e=>{var r=j.buffer,t=(e-r.byteLength+65535)/65536|0;try{return j.grow(t),Tr(),1}catch{}},Za=e=>{var r=A.length;e>>>=0;var t=gt();if(e>t)return!1;for(var n=1;n<=4;n*=2){var a=r*(1+.2/n);a=Math.min(a,e+100663296);var i=Math.min(t,zr(Math.max(e,a),65536)),s=Qa(i);if(s)return!0}return!1},pt=(e,r,t,n,a,i,s)=>{b.focusEvent||=te(256);var l=(f=event)=>{var v=b.getNodeNameForTarget(f.target),h=f.target.id?f.target.id:"",_=b.focusEvent;G(v,_+0,128),G(h,_+128,128),Z(n)(a,_,r)&&f.preventDefault()},u={target:ve(e),eventTypeString:i,callbackfunc:n,handlerFunc:l,useCapture:t};return b.registerOrRemoveHandler(u)},Ja=(e,r,t,n,a)=>pt(e,r,t,n,12,"blur"),ei=(e,r,t,n,a)=>pt(e,r,t,n,13,"focus"),Cr=(e,r,t,n,a,i,s)=>{b.keyEvent||=te(160);var l=f=>{var v=b.keyEvent;ne[v>>3]=f.timeStamp;var h=v>>2;m[h+2]=f.location,k[v+12]=f.ctrlKey,k[v+13]=f.shiftKey,k[v+14]=f.altKey,k[v+15]=f.metaKey,k[v+16]=f.repeat,m[h+5]=f.charCode,m[h+6]=f.keyCode,m[h+7]=f.which,G(f.key||"",v+32,32),G(f.code||"",v+64,32),G(f.char||"",v+96,32),G(f.locale||"",v+128,32),Z(n)(a,v,r)&&f.preventDefault()},u={target:ve(e),eventTypeString:i,callbackfunc:n,handlerFunc:l,useCapture:t};return b.registerOrRemoveHandler(u)},ri=(e,r,t,n,a)=>Cr(e,r,t,n,2,"keydown"),ti=(e,r,t,n,a)=>Cr(e,r,t,n,1,"keypress"),ni=(e,r,t,n,a)=>Cr(e,r,t,n,3,"keyup"),ai=(e,r,t,n)=>{var a=()=>Z(e)(r);ut(a,t,n,r)},_t=(e,r,t)=>{ne[e>>3]=r.timeStamp;var n=e>>2;m[n+2]=r.screenX,m[n+3]=r.screenY,m[n+4]=r.clientX,m[n+5]=r.clientY,k[e+24]=r.ctrlKey,k[e+25]=r.shiftKey,k[e+26]=r.altKey,k[e+27]=r.metaKey,O[n*2+14]=r.button,O[n*2+15]=r.buttons,m[n+8]=r.movementX,m[n+9]=r.movementY;var a=br(t);m[n+10]=r.clientX-(a.left|0),m[n+11]=r.clientY-(a.top|0)},De=(e,r,t,n,a,i,s)=>{b.mouseEvent||=te(64),e=ve(e);var l=(f=event)=>{_t(b.mouseEvent,f,e),Z(n)(a,b.mouseEvent,r)&&f.preventDefault()},u={target:e,allowsDeferredCalls:i!="mousemove"&&i!="mouseenter"&&i!="mouseleave",eventTypeString:i,callbackfunc:n,handlerFunc:l,useCapture:t};return b.registerOrRemoveHandler(u)},ii=(e,r,t,n,a)=>De(e,r,t,n,5,"mousedown"),oi=(e,r,t,n,a)=>De(e,r,t,n,33,"mouseenter"),si=(e,r,t,n,a)=>De(e,r,t,n,34,"mouseleave"),li=(e,r,t,n,a)=>De(e,r,t,n,8,"mousemove"),ui=(e,r,t,n,a)=>De(e,r,t,n,6,"mouseup"),ci=(e,r,t,n,a,i,s)=>{b.uiEvent||=te(36),e=ve(e);var l=(f=event)=>{if(f.target==e){var v=document.body;if(v){var h=b.uiEvent;m[h>>2]=0,m[h+4>>2]=v.clientWidth,m[h+8>>2]=v.clientHeight,m[h+12>>2]=innerWidth,m[h+16>>2]=innerHeight,m[h+20>>2]=outerWidth,m[h+24>>2]=outerHeight,m[h+28>>2]=pageXOffset|0,m[h+32>>2]=pageYOffset|0,Z(n)(a,h,r)&&f.preventDefault()}}},u={target:e,eventTypeString:i,callbackfunc:n,handlerFunc:l,useCapture:t};return b.registerOrRemoveHandler(u)},fi=(e,r,t,n,a)=>ci(e,r,t,n,10,"resize"),er=(e,r,t,n,a,i,s)=>{b.touchEvent||=te(1552),e=ve(e);var l=f=>{var v={},h=f.touches;for(let C of h)C.isChanged=C.onTarget=0,v[C.identifier]=C;for(let C of f.changedTouches)C.isChanged=1,v[C.identifier]=C;for(let C of f.targetTouches)v[C.identifier].onTarget=1;var _=b.touchEvent;ne[_>>3]=f.timeStamp,k[_+12]=f.ctrlKey,k[_+13]=f.shiftKey,k[_+14]=f.altKey,k[_+15]=f.metaKey;var p=_+16,E=br(e),F=0;for(let C of Object.values(v)){var T=p>>2;if(m[T+0]=C.identifier,m[T+1]=C.screenX,m[T+2]=C.screenY,m[T+3]=C.clientX,m[T+4]=C.clientY,m[T+5]=C.pageX,m[T+6]=C.pageY,k[p+28]=C.isChanged,k[p+29]=C.onTarget,m[T+8]=C.clientX-(E.left|0),m[T+9]=C.clientY-(E.top|0),p+=48,++F>31)break}m[_+8>>2]=F,Z(n)(a,_,r)&&f.preventDefault()},u={target:e,allowsDeferredCalls:i=="touchstart"||i=="touchend",eventTypeString:i,callbackfunc:n,handlerFunc:l,useCapture:t};return b.registerOrRemoveHandler(u)},di=(e,r,t,n,a)=>er(e,r,t,n,25,"touchcancel"),vi=(e,r,t,n,a)=>er(e,r,t,n,23,"touchend"),mi=(e,r,t,n,a)=>er(e,r,t,n,24,"touchmove"),gi=(e,r,t,n,a)=>er(e,r,t,n,22,"touchstart"),hi=(e,r,t,n,a,i,s)=>{b.wheelEvent||=te(96);var l=(f=event)=>{var v=b.wheelEvent;_t(v,f,e),ne[v+64>>3]=f.deltaX,ne[v+72>>3]=f.deltaY,ne[v+80>>3]=f.deltaZ,m[v+88>>2]=f.deltaMode,Z(n)(a,v,r)&&f.preventDefault()},u={target:e,allowsDeferredCalls:!0,eventTypeString:i,callbackfunc:n,handlerFunc:l,useCapture:t};return b.registerOrRemoveHandler(u)},pi=(e,r,t,n,a)=>(e=ve(e),e?typeof e.onwheel<"u"?hi(e,r,t,n,9,"wheel"):-1:-4),d,_i=e=>!!(e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance")),yi=e=>!!(e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")),wi=e=>!!(e.extPolygonOffsetClamp=e.getExtension("EXT_polygon_offset_clamp")),Ei=e=>!!(e.extClipControl=e.getExtension("EXT_clip_control")),bi=e=>!!(e.webglPolygonMode=e.getExtension("WEBGL_polygon_mode")),ki=e=>!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")),yt=e=>{var r=["EXT_color_buffer_float","EXT_conservative_depth","EXT_disjoint_timer_query_webgl2","EXT_texture_norm16","NV_shader_noperspective_interpolation","WEBGL_clip_cull_distance","EXT_clip_control","EXT_color_buffer_half_float","EXT_depth_clamp","EXT_float_blend","EXT_polygon_offset_clamp","EXT_texture_compression_bptc","EXT_texture_compression_rgtc","EXT_texture_filter_anisotropic","KHR_parallel_shader_compile","OES_texture_float_linear","WEBGL_blend_func_extended","WEBGL_compressed_texture_astc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_lose_context","WEBGL_multi_draw","WEBGL_polygon_mode"];return(e.getSupportedExtensions()||[]).filter(t=>r.includes(t))},Ci=e=>{typeof w<"u"&&w.preMainLoop.push(e)},c={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],stringCache:{},stringiCache:{},unpackAlignment:4,unpackRowLength:0,recordError:e=>{c.lastError||(c.lastError=e)},getNewId:e=>{for(var r=c.counter++,t=e.length;t<r;t++)e[t]=null;for(;e[r];)r=c.counter++;return r},genObject:(e,r,t,n)=>{for(var a=0;a<e;a++){var i=d[t](),s=i&&c.getNewId(n);i?(i.name=s,n[s]=i):c.recordError(1282),m[r+a*4>>2]=s}},MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:e=>32-Math.clz32(e===0?0:e-1),generateTempBuffers:(e,r)=>{var t=c.log2ceilLookup(c.MAX_TEMP_BUFFER_SIZE);r.tempVertexBufferCounters1=[],r.tempVertexBufferCounters2=[],r.tempVertexBufferCounters1.length=r.tempVertexBufferCounters2.length=t+1,r.tempVertexBuffers1=[],r.tempVertexBuffers2=[],r.tempVertexBuffers1.length=r.tempVertexBuffers2.length=t+1,r.tempIndexBuffers=[],r.tempIndexBuffers.length=t+1;for(var n=0;n<=t;++n){r.tempIndexBuffers[n]=null,r.tempVertexBufferCounters1[n]=r.tempVertexBufferCounters2[n]=0;var a=c.numTempVertexBuffersPerSize;r.tempVertexBuffers1[n]=[],r.tempVertexBuffers2[n]=[];var i=r.tempVertexBuffers1[n],s=r.tempVertexBuffers2[n];i.length=s.length=a;for(var l=0;l<a;++l)i[l]=s[l]=null}if(e){r.tempQuadIndexBuffer=d.createBuffer(),r.GLctx.bindBuffer(34963,r.tempQuadIndexBuffer);for(var u=c.MAX_TEMP_BUFFER_SIZE>>1,f=new Uint16Array(u),n=0,v=0;f[n++]=v,!(n>=u||(f[n++]=v+1,n>=u)||(f[n++]=v+2,n>=u)||(f[n++]=v,n>=u)||(f[n++]=v+2,n>=u)||(f[n++]=v+3,n>=u));)v+=4;r.GLctx.bufferData(34963,f,35044),r.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:e=>{var r=c.log2ceilLookup(e),t=c.currentContext.tempVertexBuffers1[r],n=c.currentContext.tempVertexBufferCounters1[r];c.currentContext.tempVertexBufferCounters1[r]=c.currentContext.tempVertexBufferCounters1[r]+1&c.numTempVertexBuffersPerSize-1;var a=t[n];if(a)return a;var i=d.getParameter(34964);return t[n]=d.createBuffer(),d.bindBuffer(34962,t[n]),d.bufferData(34962,1<<r,35048),d.bindBuffer(34962,i),t[n]},getTempIndexBuffer:e=>{var r=c.log2ceilLookup(e),t=c.currentContext.tempIndexBuffers[r];if(t)return t;var n=d.getParameter(34965);return c.currentContext.tempIndexBuffers[r]=d.createBuffer(),d.bindBuffer(34963,c.currentContext.tempIndexBuffers[r]),d.bufferData(34963,1<<r,35048),d.bindBuffer(34963,n),c.currentContext.tempIndexBuffers[r]},newRenderingFrameStarted:()=>{if(c.currentContext){var e=c.currentContext.tempVertexBuffers1;c.currentContext.tempVertexBuffers1=c.currentContext.tempVertexBuffers2,c.currentContext.tempVertexBuffers2=e,e=c.currentContext.tempVertexBufferCounters1,c.currentContext.tempVertexBufferCounters1=c.currentContext.tempVertexBufferCounters2,c.currentContext.tempVertexBufferCounters2=e;for(var r=c.log2ceilLookup(c.MAX_TEMP_BUFFER_SIZE),t=0;t<=r;++t)c.currentContext.tempVertexBufferCounters1[t]=0}},getSource:(e,r,t,n)=>{for(var a="",i=0;i<r;++i){var s=n?S[n+i*4>>2]:void 0;a+=J(S[t+i*4>>2],s)}return a},calcBufLength:(e,r,t,n)=>{if(t>0)return n*t;var a=c.byteSizeByType[r-c.byteSizeByTypeRoot];return e*a*n},usedTempBuffers:[],preDrawHandleClientVertexAttribBindings:e=>{c.resetBufferBinding=!1;for(var r=0;r<c.currentContext.maxVertexAttribs;++r){var t=c.currentContext.clientBuffers[r];if(!(!t.clientside||!t.enabled)){c.resetBufferBinding=!0;var n=c.calcBufLength(t.size,t.type,t.stride,e),a=c.getTempVertexBuffer(n);d.bindBuffer(34962,a),d.bufferSubData(34962,0,A.subarray(t.ptr,t.ptr+n)),t.vertexAttribPointerAdaptor.call(d,r,t.size,t.type,t.normalized,t.stride,0)}}},postDrawHandleClientVertexAttribBindings:()=>{c.resetBufferBinding&&d.bindBuffer(34962,c.buffers[d.currentArrayBufferBinding])},createContext:(e,r)=>{if(!e.getContextSafariWebGL2Fixed){let a=function(i,s){var l=e.getContextSafariWebGL2Fixed(i,s);return i=="webgl"==l instanceof WebGLRenderingContext?l:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=a}var t=e.getContext("webgl2",r);if(!t)return 0;var n=c.registerContext(t,r);return n},registerContext:(e,r)=>{var t=c.getNewId(c.contexts),n={handle:t,attributes:r,version:r.majorVersion,GLctx:e};e.canvas&&(e.canvas.GLctxObject=n),c.contexts[t]=n,(typeof r.enableExtensionsByDefault>"u"||r.enableExtensionsByDefault)&&c.initExtensions(n),n.maxVertexAttribs=n.GLctx.getParameter(34921),n.clientBuffers=[];for(var a=0;a<n.maxVertexAttribs;a++)n.clientBuffers[a]={enabled:!1,clientside:!1,size:0,type:0,normalized:0,stride:0,ptr:0,vertexAttribPointerAdaptor:null};return c.generateTempBuffers(!1,n),t},makeContextCurrent:e=>(c.currentContext=c.contexts[e],g.ctx=d=c.currentContext?.GLctx,!(e&&!d)),getContext:e=>c.contexts[e],deleteContext:e=>{c.currentContext===c.contexts[e]&&(c.currentContext=null),typeof b=="object"&&b.removeAllHandlersOnTarget(c.contexts[e].GLctx.canvas),c.contexts[e]?.GLctx.canvas&&(c.contexts[e].GLctx.canvas.GLctxObject=void 0),c.contexts[e]=null},initExtensions:e=>{if(e||=c.currentContext,!e.initExtensionsDone){e.initExtensionsDone=!0;var r=e.GLctx;ki(r),wi(r),Ei(r),bi(r),_i(r),yi(r),e.version>=2&&(r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!r.disjointTimerQueryExt)&&(r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query")),yt(r).forEach(t=>{!t.includes("lose_context")&&!t.includes("debug")&&r.getExtension(t)})}}},Pi=["default","low-power","high-performance"],xi=(e,r)=>{var t=r>>2,n=m[t+2],a={alpha:!!k[r+0],depth:!!k[r+1],stencil:!!k[r+2],antialias:!!k[r+3],premultipliedAlpha:!!k[r+4],preserveDrawingBuffer:!!k[r+5],powerPreference:Pi[n],failIfMajorPerformanceCaveat:!!k[r+12],majorVersion:m[t+4],minorVersion:m[t+5],enableExtensionsByDefault:k[r+24],explicitSwapControl:k[r+25],proxyContextToMainThread:m[t+7],renderViaOffscreenBackBuffer:k[r+32]},i=xe(e);if(!i||a.explicitSwapControl)return 0;var s=c.createContext(i,a);return s},Si=xi,Fi=e=>{c.currentContext==e&&(c.currentContext=0),c.deleteContext(e)},Bi=()=>c.currentContext?c.currentContext.handle:0,Ti=Bi,Ai=e=>d.getParameter(e),Li=e=>{var r=c.makeContextCurrent(e);return r?0:-5},Pr={},Di=()=>q||"./this.program",Re=()=>{if(!Re.strings){var e=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Di()};for(var t in Pr)Pr[t]===void 0?delete r[t]:r[t]=Pr[t];var n=[];for(var t in r)n.push(`${t}=${r[t]}`);Re.strings=n}return Re.strings},Ri=(e,r)=>{var t=0,n=0;for(var a of Re()){var i=r+t;S[e+n>>2]=i,t+=G(a,i,1/0)+1,n+=4}return 0},Mi=(e,r)=>{var t=Re();S[e>>2]=t.length;var n=0;for(var a of t)n+=fe(a)+1;return S[r>>2]=n,0};function $i(e){try{var r=B.getStreamFromFD(e);return o.close(r),0}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return t.errno}}function Ii(e,r){try{var t=0,n=0,a=0,i=B.getStreamFromFD(e),s=i.tty?2:o.isDir(i.mode)?3:o.isLink(i.mode)?7:4;return k[r]=s,O[r+2>>1]=a,Q[r+8>>3]=BigInt(t),Q[r+16>>3]=BigInt(n),0}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return l.errno}}var Oi=(e,r,t,n)=>{for(var a=0,i=0;i<t;i++){var s=S[r>>2],l=S[r+4>>2];r+=8;var u=o.read(e,k,s,l,n);if(u<0)return-1;if(a+=u,u<l)break}return a};function Ui(e,r,t,n){try{var a=B.getStreamFromFD(e),i=Oi(a,r,t);return S[n>>2]=i,0}catch(s){if(typeof o>"u"||s.name!=="ErrnoError")throw s;return s.errno}}function zi(e,r,t,n){r=Qe(r);try{if(isNaN(r))return 61;var a=B.getStreamFromFD(e);return o.llseek(a,r,t),Q[n>>3]=BigInt(a.position),a.getdents&&r===0&&t===0&&(a.getdents=null),0}catch(i){if(typeof o>"u"||i.name!=="ErrnoError")throw i;return i.errno}}var Wi=(e,r,t,n)=>{for(var a=0,i=0;i<t;i++){var s=S[r>>2],l=S[r+4>>2];r+=8;var u=o.write(e,k,s,l,n);if(u<0)return-1;if(a+=u,u<l)break}return a};function Hi(e,r,t,n){try{var a=B.getStreamFromFD(e),i=Wi(a,r,t);return S[n>>2]=i,0}catch(s){if(typeof o>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var Gi=e=>d.activeTexture(e),Vi=(e,r)=>{d.attachShader(c.programs[e],c.shaders[r])},Ni=(e,r)=>{d.beginQuery(e,c.queries[r])},ji=(e,r)=>{if(r&&!c.buffers[r]){var t=d.createBuffer();t.name=r,c.buffers[r]=t}e==34962?d.currentArrayBufferBinding=r:e==34963&&(d.currentElementArrayBufferBinding=r),e==35051?d.currentPixelPackBufferBinding=r:e==35052&&(d.currentPixelUnpackBufferBinding=r),d.bindBuffer(e,c.buffers[r])},qi=(e,r)=>{d.bindFramebuffer(e,c.framebuffers[r])},Xi=(e,r)=>{d.bindRenderbuffer(e,c.renderbuffers[r])},Yi=(e,r)=>{d.bindTexture(e,c.textures[r])},Ki=e=>{d.bindVertexArray(c.vaos[e]);var r=d.getParameter(34965);d.currentElementArrayBufferBinding=r?r.name|0:0},Qi=(e,r)=>d.blendEquationSeparate(e,r),Zi=(e,r,t,n)=>d.blendFuncSeparate(e,r,t,n),Ji=(e,r,t,n,a,i,s,l,u,f)=>d.blitFramebuffer(e,r,t,n,a,i,s,l,u,f),eo=(e,r,t,n)=>{{t&&r?d.bufferData(e,A,n,t,r):d.bufferData(e,r,n);return}},ro=(e,r,t,n)=>{{t&&d.bufferSubData(e,r,A,n,t);return}},to=e=>d.checkFramebufferStatus(e),no=e=>d.clear(e),ao=(e,r,t,n)=>d.clearColor(e,r,t,n),io=e=>d.clearDepth(e),oo=e=>d.clearStencil(e),so=(e,r,t,n)=>{d.colorMask(!!e,!!r,!!t,!!n)},lo=e=>{d.compileShader(c.shaders[e])},uo=(e,r,t,n,a)=>d.copyBufferSubData(e,r,t,n,a),co=(e,r,t,n,a,i,s,l)=>d.copyTexImage2D(e,r,t,n,a,i,s,l),fo=()=>{var e=c.getNewId(c.programs),r=d.createProgram();return r.name=e,r.maxUniformLength=r.maxAttributeLength=r.maxUniformBlockNameLength=0,r.uniformIdCounter=1,c.programs[e]=r,e},vo=e=>{var r=c.getNewId(c.shaders);return c.shaders[r]=d.createShader(e),r},mo=e=>d.cullFace(e),go=(e,r)=>{for(var t=0;t<e;t++){var n=m[r+t*4>>2],a=c.buffers[n];a&&(d.deleteBuffer(a),a.name=0,c.buffers[n]=null,n==d.currentArrayBufferBinding&&(d.currentArrayBufferBinding=0),n==d.currentElementArrayBufferBinding&&(d.currentElementArrayBufferBinding=0),n==d.currentPixelPackBufferBinding&&(d.currentPixelPackBufferBinding=0),n==d.currentPixelUnpackBufferBinding&&(d.currentPixelUnpackBufferBinding=0))}},ho=(e,r)=>{for(var t=0;t<e;++t){var n=m[r+t*4>>2],a=c.framebuffers[n];a&&(d.deleteFramebuffer(a),a.name=0,c.framebuffers[n]=null)}},po=e=>{if(e){var r=c.programs[e];if(!r){c.recordError(1281);return}d.deleteProgram(r),r.name=0,c.programs[e]=null}},_o=(e,r)=>{for(var t=0;t<e;t++){var n=m[r+t*4>>2],a=c.queries[n];a&&(d.deleteQuery(a),c.queries[n]=null)}},yo=(e,r)=>{for(var t=0;t<e;t++){var n=m[r+t*4>>2],a=c.renderbuffers[n];a&&(d.deleteRenderbuffer(a),a.name=0,c.renderbuffers[n]=null)}},wo=e=>{if(e){var r=c.shaders[e];if(!r){c.recordError(1281);return}d.deleteShader(r),c.shaders[e]=null}},Eo=(e,r)=>{for(var t=0;t<e;t++){var n=m[r+t*4>>2],a=c.textures[n];a&&(d.deleteTexture(a),a.name=0,c.textures[n]=null)}},bo=(e,r)=>{for(var t=0;t<e;t++){var n=m[r+t*4>>2];d.deleteVertexArray(c.vaos[n]),c.vaos[n]=null}},ko=e=>d.depthFunc(e),Co=e=>{d.depthMask(!!e)},Po=(e,r)=>{d.detachShader(c.programs[e],c.shaders[r])},xo=e=>d.disable(e),So=e=>{var r=c.currentContext.clientBuffers[e];r.enabled=!1,d.disableVertexAttribArray(e)},Fo=(e,r,t)=>{c.preDrawHandleClientVertexAttribBindings(r+t),d.drawArrays(e,r,t),c.postDrawHandleClientVertexAttribBindings()},Bo=(e,r,t,n)=>{d.drawArraysInstanced(e,r,t,n)},wt=[],To=(e,r)=>{for(var t=wt[e],n=0;n<e;n++)t[n]=m[r+n*4>>2];d.drawBuffers(t)},Et=(e,r,t,n)=>{var a,i=0;if(!d.currentElementArrayBufferBinding){var s=c.calcBufLength(1,t,0,r);if(a=c.getTempIndexBuffer(s),d.bindBuffer(34963,a),d.bufferSubData(34963,0,A.subarray(n,n+s)),r>0)for(var l=0;l<c.currentContext.maxVertexAttribs;++l){var u=c.currentContext.clientBuffers[l];if(u.clientside&&u.enabled){let f;switch(t){case 5121:f=Uint8Array;break;case 5123:f=Uint16Array;break;case 5125:f=Uint32Array;break;default:c.recordError(1282);return}i=new f(A.buffer,n,r).reduce((v,h)=>Math.max(v,h))+1;break}}n=0}c.preDrawHandleClientVertexAttribBindings(i),d.drawElements(e,r,t,n),c.postDrawHandleClientVertexAttribBindings(r),d.currentElementArrayBufferBinding||d.bindBuffer(34963,null)},Ao=(e,r,t,n,a)=>{d.drawElementsInstanced(e,r,t,n,a)},Lo=(e,r,t,n,a,i)=>{Et(e,n,a,i)},Do=e=>d.enable(e),Ro=e=>{var r=c.currentContext.clientBuffers[e];r.enabled=!0,d.enableVertexAttribArray(e)},Mo=e=>d.endQuery(e),$o=()=>d.finish(),Io=()=>d.flush(),Oo=(e,r,t,n)=>{d.framebufferRenderbuffer(e,r,t,c.renderbuffers[n])},Uo=(e,r,t,n,a)=>{d.framebufferTexture2D(e,r,t,c.textures[n],a)},zo=(e,r)=>{c.genObject(e,r,"createBuffer",c.buffers)},Wo=(e,r)=>{c.genObject(e,r,"createFramebuffer",c.framebuffers)},Ho=(e,r)=>{c.genObject(e,r,"createQuery",c.queries)},Go=(e,r)=>{c.genObject(e,r,"createRenderbuffer",c.renderbuffers)},Vo=(e,r)=>{c.genObject(e,r,"createTexture",c.textures)},No=(e,r)=>{c.genObject(e,r,"createVertexArray",c.vaos)},jo=e=>d.generateMipmap(e),qo=(e,r)=>d.getAttribLocation(c.programs[e],J(r)),Xo=(e,r)=>{S[e>>2]=r;var t=S[e>>2];S[e+4>>2]=(r-t)/4294967296},xr=()=>{var e=yt(d);return e=e.concat(e.map(r=>"GL_"+r)),e},Sr=(e,r,t)=>{if(!r){c.recordError(1281);return}var n=void 0;switch(e){case 36346:n=1;break;case 36344:t!=0&&t!=1&&c.recordError(1280);return;case 34814:case 36345:n=0;break;case 34466:var a=d.getParameter(34467);n=a?a.length:0;break;case 33309:if(c.currentContext.version<2){c.recordError(1282);return}n=xr().length;break;case 33307:case 33308:if(c.currentContext.version<2){c.recordError(1280);return}n=e==33307?3:0;break}if(n===void 0){var i=d.getParameter(e);switch(typeof i){case"number":n=i;break;case"boolean":n=i?1:0;break;case"string":c.recordError(1280);return;case"object":if(i===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{n=0;break}default:{c.recordError(1280);return}}else if(i instanceof Float32Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Array){for(var s=0;s<i.length;++s)switch(t){case 0:m[r+s*4>>2]=i[s];break;case 2:Y[r+s*4>>2]=i[s];break;case 4:k[r+s]=i[s]?1:0;break}return}else try{n=i.name|0}catch(l){c.recordError(1280),H(`GL_INVALID_ENUM in glGet${t}v: Unknown object returned from WebGL getParameter(${e})! (error: ${l})`);return}break;default:c.recordError(1280),H(`GL_INVALID_ENUM in glGet${t}v: Native code calling glGet${t}v(${e}) and it returns ${i} of type ${typeof i}!`);return}}switch(t){case 1:Xo(r,n);break;case 0:m[r>>2]=n;break;case 2:Y[r>>2]=n;break;case 4:k[r]=n?1:0;break}},Yo=(e,r)=>Sr(e,r,4),bt=e=>{switch(e){case 34962:e=34964;break;case 34963:e=34965;break;case 35051:e=35053;break;case 35052:e=35055;break;case 35982:e=35983;break;case 36662:e=36662;break;case 36663:e=36663;break;case 35345:e=35368;break}var r=d.getParameter(e);return r?r.name|0:0},Ko=()=>{var e=d.getError()||c.lastError;return c.lastError=0,e},Qo=(e,r)=>Sr(e,r,2),Zo=(e,r,t,n)=>{var a=d.getFramebufferAttachmentParameter(e,r,t);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=a.name|0),m[n>>2]=a},Jo=(e,r)=>Sr(e,r,0),es=(e,r,t,n)=>{var a=d.getProgramInfoLog(c.programs[e]);a===null&&(a="(unknown error)");var i=r>0&&n?G(a,n,r):0;t&&(m[t>>2]=i)},rs=(e,r,t)=>{if(!t){c.recordError(1281);return}if(e>=c.counter){c.recordError(1281);return}if(e=c.programs[e],r==35716){var n=d.getProgramInfoLog(e);n===null&&(n="(unknown error)"),m[t>>2]=n.length+1}else if(r==35719){if(!e.maxUniformLength)for(var a=d.getProgramParameter(e,35718),i=0;i<a;++i)e.maxUniformLength=Math.max(e.maxUniformLength,d.getActiveUniform(e,i).name.length+1);m[t>>2]=e.maxUniformLength}else if(r==35722){if(!e.maxAttributeLength)for(var s=d.getProgramParameter(e,35721),i=0;i<s;++i)e.maxAttributeLength=Math.max(e.maxAttributeLength,d.getActiveAttrib(e,i).name.length+1);m[t>>2]=e.maxAttributeLength}else if(r==35381){if(!e.maxUniformBlockNameLength)for(var l=d.getProgramParameter(e,35382),i=0;i<l;++i)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,d.getActiveUniformBlockName(e,i).length+1);m[t>>2]=e.maxUniformBlockNameLength}else m[t>>2]=d.getProgramParameter(e,r)},ts=(e,r,t)=>{if(!t){c.recordError(1281);return}var n=c.queries[e],a=d.getQueryParameter(n,r),i;typeof a=="boolean"?i=a?1:0:i=a,m[t>>2]=i},ns=(e,r,t)=>{if(!t){c.recordError(1281);return}m[t>>2]=d.getRenderbufferParameter(e,r)},as=(e,r,t,n)=>{var a=d.getShaderInfoLog(c.shaders[e]);a===null&&(a="(unknown error)");var i=r>0&&n?G(a,n,r):0;t&&(m[t>>2]=i)},is=(e,r,t)=>{if(!t){c.recordError(1281);return}if(r==35716){var n=d.getShaderInfoLog(c.shaders[e]);n===null&&(n="(unknown error)");var a=n?n.length+1:0;m[t>>2]=a}else if(r==35720){var i=d.getShaderSource(c.shaders[e]),s=i?i.length+1:0;m[t>>2]=s}else m[t>>2]=d.getShaderParameter(c.shaders[e],r)},Me=e=>{var r=fe(e)+1,t=te(r);return t&&G(e,t,r),t},os=e=>{var r=c.stringCache[e];if(!r){switch(e){case 7939:r=Me(xr().join(" "));break;case 7936:case 7937:case 37445:case 37446:var t=d.getParameter(e);t||c.recordError(1280),r=t?Me(t):0;break;case 7938:var n=d.getParameter(7938),a=`OpenGL ES 2.0 (${n})`;a=`OpenGL ES 3.0 (${n})`,r=Me(a);break;case 35724:var i=d.getParameter(35724),s=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,l=i.match(s);l!==null&&(l[1].length==3&&(l[1]=l[1]+"0"),i=`OpenGL ES GLSL ES ${l[1]} (${i})`),r=Me(i);break;default:c.recordError(1280)}c.stringCache[e]=r}return r},ss=(e,r)=>{if(c.currentContext.version<2)return c.recordError(1282),0;var t=c.stringiCache[e];if(t)return r<0||r>=t.length?(c.recordError(1281),0):t[r];switch(e){case 7939:var n=xr().map(Me);return t=c.stringiCache[e]=n,r<0||r>=t.length?(c.recordError(1281),0):t[r];default:return c.recordError(1280),0}},ls=e=>parseInt(e),kt=e=>e.slice(-1)=="]"&&e.lastIndexOf("["),us=e=>{var r=e.uniformLocsById,t=e.uniformSizeAndIdsByName,n,a;if(!r){e.uniformLocsById=r={},e.uniformArrayNamesById={};var i=d.getProgramParameter(e,35718);for(n=0;n<i;++n){var s=d.getActiveUniform(e,n),l=s.name,u=s.size,f=kt(l),v=f>0?l.slice(0,f):l,h=e.uniformIdCounter;for(e.uniformIdCounter+=u,t[v]=[u,h],a=0;a<u;++a)r[h]=a,e.uniformArrayNamesById[h++]=v}}},cs=(e,r)=>{if(r=J(r),e=c.programs[e]){us(e);var t=e.uniformLocsById,n=0,a=r,i=kt(r);i>0&&(n=ls(r.slice(i+1))>>>0,a=r.slice(0,i));var s=e.uniformSizeAndIdsByName[a];if(s&&n<s[0]&&(n+=s[1],t[n]=t[n]||d.getUniformLocation(e,r)))return n}else c.recordError(1281);return-1},fs=e=>d.lineWidth(e),ds=e=>{e=c.programs[e],d.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},Ct=e=>{switch(e){case 34962:case 34963:case 36662:case 36663:case 35051:case 35052:case 35882:case 35982:case 35345:return!0;default:return!1}},vs=(e,r,t,n)=>{if((n&33)!=0)return H("glMapBufferRange access does not support MAP_READ or MAP_UNSYNCHRONIZED"),0;if((n&2)==0)return H("glMapBufferRange access must include MAP_WRITE"),0;if((n&12)==0)return H("glMapBufferRange access must include INVALIDATE_BUFFER or INVALIDATE_RANGE"),0;if(!Ct(e))return c.recordError(1280),H("GL_INVALID_ENUM in glMapBufferRange"),0;var a=te(t),i=bt(e);return a?(i=c.mappedBuffers[i]??={},i.offset=r,i.length=t,i.mem=a,i.access=n,a):0},ms=(e,r)=>{e==3317?c.unpackAlignment=r:e==3314&&(c.unpackRowLength=r),d.pixelStorei(e,r)},gs=e=>d.readBuffer(e),$e=e=>(e-=5120,e==0?k:e==1?A:e==2?O:e==4?m:e==6?Y:e==5||e==28922||e==28520||e==30779||e==30782?S:ee),Se=(e,r)=>e>>>31-Math.clz32(r.BYTES_PER_ELEMENT),hs=(e,r,t,n,a,i,s)=>{{if(d.currentPixelPackBufferBinding){d.readPixels(e,r,t,n,a,i,s);return}var l=$e(i),u=Se(s,l);d.readPixels(e,r,t,n,a,i,l,u);return}},ps=(e,r,t,n)=>d.renderbufferStorage(e,r,t,n),_s=(e,r,t,n,a)=>d.renderbufferStorageMultisample(e,r,t,n,a),ys=(e,r,t,n)=>d.scissor(e,r,t,n),ws=(e,r,t,n)=>{var a=c.getSource(e,r,t,n);d.shaderSource(c.shaders[e],a)},Es=(e,r,t,n)=>d.stencilFuncSeparate(e,r,t,n),bs=(e,r)=>d.stencilMaskSeparate(e,r),ks=(e,r,t,n)=>d.stencilOpSeparate(e,r,t,n),Cs=(e,r,t)=>{function n(s,l){return s+l-1&-l}var a=(c.unpackRowLength||e)*t,i=n(a,c.unpackAlignment);return r*i},Ps=e=>{var r={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return r[e-6402]||1},xs=(e,r,t,n,a,i)=>{var s=$e(e),l=Ps(r)*s.BYTES_PER_ELEMENT,u=Cs(t,n,l);return s.subarray(Se(a,s),Se(a+u,s))},Ss=(e,r,t,n,a,i,s,l,u)=>{{if(d.currentPixelUnpackBufferBinding){d.texImage2D(e,r,t,n,a,i,s,l,u);return}if(u){var f=$e(l),v=Se(u,f);d.texImage2D(e,r,t,n,a,i,s,l,f,v);return}}var h=u?xs(l,s,n,a,u):null;d.texImage2D(e,r,t,n,a,i,s,l,h)},Fs=(e,r,t,n,a,i,s,l,u,f)=>{if(d.currentPixelUnpackBufferBinding)d.texImage3D(e,r,t,n,a,i,s,l,u,f);else if(f){var v=$e(u);d.texImage3D(e,r,t,n,a,i,s,l,u,v,Se(f,v))}else d.texImage3D(e,r,t,n,a,i,s,l,u,null)},Bs=(e,r,t)=>d.texParameterf(e,r,t),Ts=(e,r,t)=>d.texParameteri(e,r,t),As=(e,r,t,n,a,i,s,l,u,f,v)=>{if(d.currentPixelUnpackBufferBinding)d.texSubImage3D(e,r,t,n,a,i,s,l,u,f,v);else if(v){var h=$e(f);d.texSubImage3D(e,r,t,n,a,i,s,l,u,f,h,Se(v,h))}else d.texSubImage3D(e,r,t,n,a,i,s,l,u,f,null)},Ls=(e,r,t,n)=>{e=c.programs[e];for(var a=[],i=0;i<r;i++)a.push(J(m[t+i*4>>2]));d.transformFeedbackVaryings(e,a,n)},oe=e=>{var r=d.currentProgram;if(r){var t=r.uniformLocsById[e];return typeof t=="number"&&(r.uniformLocsById[e]=t=d.getUniformLocation(r,r.uniformArrayNamesById[e]+(t>0?`[${t}]`:""))),t}else c.recordError(1282)},Ds=(e,r)=>{d.uniform1f(oe(e),r)},Rs=(e,r,t)=>{r&&d.uniform1fv(oe(e),Y,t>>2,r)},Ms=(e,r)=>{d.uniform1i(oe(e),r)},$s=(e,r,t)=>{r&&d.uniform1iv(oe(e),m,t>>2,r)},Is=(e,r,t)=>{r&&d.uniform2fv(oe(e),Y,t>>2,r*2)},Os=(e,r,t)=>{r&&d.uniform2iv(oe(e),m,t>>2,r*2)},Us=(e,r,t)=>{r&&d.uniform3fv(oe(e),Y,t>>2,r*3)},zs=(e,r,t)=>{r&&d.uniform4fv(oe(e),Y,t>>2,r*4)},Ws=(e,r,t,n)=>{r&&d.uniformMatrix3fv(oe(e),!!t,Y,n>>2,r*9)},Hs=(e,r,t,n)=>{r&&d.uniformMatrix4fv(oe(e),!!t,Y,n>>2,r*16)},Gs=e=>{if(!Ct(e))return c.recordError(1280),H("GL_INVALID_ENUM in glUnmapBuffer"),0;var r=bt(e),t=c.mappedBuffers[r];return!t||!t.mem?(c.recordError(1282),H("buffer was never mapped in glUnmapBuffer"),0):(t.access&16||d.bufferSubData(e,t.offset,A,t.mem,t.length),ae(t.mem),t.mem=0,1)},Vs=e=>{e=c.programs[e],d.useProgram(e),d.currentProgram=e},Ns=(e,r)=>{d.vertexAttribDivisor(e,r)},js=(e,r,t,n,a,i)=>{var s=c.currentContext.clientBuffers[e];if(!d.currentArrayBufferBinding){s.size=r,s.type=t,s.normalized=n,s.stride=a,s.ptr=i,s.clientside=!0,s.vertexAttribPointerAdaptor=function(l,u,f,v,h,_){this.vertexAttribPointer(l,u,f,v,h,_)};return}s.clientside=!1,d.vertexAttribPointer(e,r,t,!!n,a,i)},qs=(e,r,t,n)=>d.viewport(e,r,t,n),Pt={initializeCanvasElement:(e,r)=>{const t=xe(e);if(!t)return;const n=t.parentElement,a=document.querySelector("body");r&&(a===n?(a.style.margin=0,a.style.width="100vw",a.style.height="100vh"):(n.style.position="relative",n.style.width="100%",n.style.height="100%"),t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",window.dispatchEvent(new Event("resize")))},getParentElementBoundingRectSize:e=>{const r=xe(e);if(!r)return 0;const t=r.parentElement,n=window.devicePixelRatio,a=t.getBoundingClientRect().width,i=t.getBoundingClientRect().height,s=Math.floor(a*n+.5),l=Math.floor(i*n+.5),u=te(8),f=u>>2;return m.set([s,l],f),u}},Xs=(e,r,t,n)=>r?setTimeout(a=>Z(t)(a),e,n):setInterval(a=>Z(t)(a),e,n),Ys=(e,r)=>{r?clearTimeout(e):clearInterval(e)},Ks=e=>Pt.getParentElementBoundingRectSize(e),Qs=(e,r)=>{Pt.initializeCanvasElement(e,r)},Zs=(e,r,t)=>{var n=WebAssembly.promising(Z(e)),a=Z(r);async function i(){var s=await n(t);s?a(t):requestAnimationFrame(i)}requestAnimationFrame(i)},Js=(...e)=>o.createPath(...e),el=(...e)=>o.unlink(...e),rl=(...e)=>o.createLazyFile(...e),tl=(...e)=>o.createDevice(...e),nl=e=>{var r=lr(e);Rt(r)},al=e=>{var r=lr(e);Dt(r)};o.createPreloadedFile=Gr,o.staticInit(),P.doesNotExistError=new o.ErrnoError(44),P.doesNotExistError.stack="<generic error, no stack>",Fn(),Hn(),g.requestAnimationFrame=w.requestAnimationFrame,g.pauseMainLoop=w.pause,g.resumeMainLoop=w.resume,w.init(),Ci(()=>c.newRenderingFrameStarted());for(let e=0;e<32;++e)wt.push(new Array(e));g.noExitRuntime&&($r=g.noExitRuntime),g.preloadPlugins&&(We=g.preloadPlugins),g.print&&(me=g.print),g.printErr&&(H=g.printErr),g.wasmBinary&&(ge=g.wasmBinary),g.arguments&&g.arguments,g.thisProgram&&(q=g.thisProgram),g.addRunDependency=nr,g.removeRunDependency=Ue,g.FS_createPreloadedFile=Gr,g.FS_unlink=el,g.FS_createPath=Js,g.FS_createDevice=tl,g.FS=o,g.FS_createDataFile=Hr,g.FS_createLazyFile=rl,g.getExceptionMessage=Nr,g.incrementExceptionRefcount=nl,g.decrementExceptionRefcount=al;var il={5222460:(e,r)=>{xe(e).style.cursor=r?"default":"none"}},xt,te,ae,St,Ft,Bt,Tt,At,Lt,Dt,Rt,Mt,$t;function ol(e){xt=e.Hc,te=e.Jc,ae=e.Lc,g._setDefaultExpandVTKCanvasToContainer=e.Mc,g._setDefaultInstallHTMLResizeObserver=e.Nc,St=e.Oc,Ft=e.Pc,Bt=e.Qc,Tt=e.Rc,At=e.Sc,Lt=e.Tc,Dt=e.Uc,Rt=e.Vc,Mt=e.Wc,$t=e.Xc}var It,sl={ka:Kt,cc:nn,bc:an,dc:on,q:sn,Zb:ln,Vb:un,Ob:cn,gc:fn,Wb:dn,Sb:vn,Xb:mn,Na:gn,Nb:hn,Mb:pn,Yb:_n,Ma:yn,La:En,ec:bn,za:Cn,Cb:Pn,D:jn,ja:Yn,f:Kn,Ec:Jn,xa:ra,s:ta,g:na,xb:aa,X:da,Hb:va,Jb:ga,Rb:ba,Pb:ka,Qb:Ca,fc:Pa,ac:Sa,oc:Ta,kc:Ra,Oa:at,pc:Ua,hc:Ha,gb:Ga,Lb:Va,ic:ja,hb:qa,Qa:Xa,qc:Ka,Kb:Za,Va:Ja,sc:vt,Wa:ei,Ua:ri,Sa:ti,Ta:ni,lc:ai,ib:Ze,db:ii,Za:oi,Ya:si,eb:li,cb:ui,fb:fi,_a:di,$a:vi,bb:mi,ab:gi,Xa:pi,rc:Si,pa:Fi,oa:Ti,W:Ai,J:Li,_b:Ri,$b:Mi,w:ot,I:$i,Ub:Ii,Pa:Ui,Tb:zi,la:Hi,N:Gi,qb:Vi,Ha:Ni,b:ji,C:qi,S:Xi,i:Yi,x:Ki,ca:Qi,O:Zi,Bb:Ji,G:eo,Ea:ro,T:to,d:no,fa:ao,ea:io,zb:oo,R:so,tb:lo,uc:uo,jb:co,rb:fo,vb:vo,ba:mo,p:go,Db:ho,Dc:po,V:_o,_:yo,Y:wo,wc:Eo,H:bo,ga:ko,ha:Co,K:Po,j:xo,wa:So,y:Fo,Da:Bo,ya:To,Ja:Et,Ab:Ao,k:Lo,l:Do,F:Ro,Ga:Mo,Ia:$o,ia:Io,Ba:Oo,Ca:Uo,u:zo,Eb:Wo,ma:Ho,wb:Go,vc:Vo,Ka:No,aa:jo,$:qo,v:Yo,h:Ko,U:Qo,o:Zo,a:Jo,ob:es,ta:rs,Fa:ts,t:ns,sb:as,ua:is,n:os,Aa:ss,Bc:cs,da:fs,pb:ds,Gb:vs,r:ms,yb:gs,m:hs,Z:ps,va:_s,Q:ys,ub:ws,z:Es,B:bs,A:ks,e:Ss,kb:Fs,lb:Bs,c:Ts,Ib:As,tc:Ls,Ac:Ds,zc:Rs,Cc:Ms,yc:$s,mb:Is,xc:Os,ra:Us,qa:zs,nb:Ws,sa:Hs,Fb:Gs,M:Vs,L:Ns,E:js,P:qs,jc:Xs,na:Ys,nc:Ks,Ra:Qs,mc:Zs},we=await qt();function Fr(){if(pe>0){Be=Fr;return}if(Ot(),pe>0){Be=Fr;return}function e(){g.calledRun=!0,!ce&&(Ut(),$?.(g),g.onRuntimeInitialized?.(),zt())}g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),e()},1)):e()}function ll(){if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.shift()()}return ll(),Fr(),tr?se=g:se=new Promise((e,r)=>{$=e,I=r}),se});const cl={canvas:document.getElementById("canvas"),setupOptions:x=>{x.set_color("render.background.color",0,0,0),x.toggle("model.scivis.enable"),x.set_string("model.scivis.array_name","Colors"),x.set_integer("model.scivis.component",-2),x.toggle("model.scivis.cells"),x.toggle("render.effect.antialiasing.enable"),x.toggle("render.effect.tone_mapping"),x.toggle("render.effect.ambient_occlusion"),x.toggle("render.hdri.ambient"),x.toggle("ui.axis"),x.toggle("render.grid.enable"),x.set_as_string("scene.up_direction","+Z")}};ul(cl).then(async x=>{const se=await fetch("f3d.vtp").then(D=>D.arrayBuffer());x.FS.writeFile("f3d.vtp",new Uint8Array(se)),x.Engine.autoloadPlugins(),x.engineInstance=x.Engine.create();const g=D=>{document.getElementById("file-name").innerHTML=D;const $="/"+D,I=x.engineInstance.getScene();I.supports($)?(I.clear(),I.add($)):console.error("File "+$+" cannot be opened"),x.engineInstance.getWindow().resetCamera(),x.engineInstance.getWindow().render()},q=document.querySelector("#progressEl");document.querySelector("#file-selector").addEventListener("change",D=>{for(const $ of D.target.files){const I=new FileReader;I.addEventListener("loadend",j=>{q.textContent="100%",q.value=100,x.FS.writeFile($.name,new Uint8Array(I.result)),g($.name),q.parentElement.style.display="none"}),I.addEventListener("progress",j=>{console.log(j);const k=Math.floor(100*j.loaded/j.total);q.parentElement.style.display="block",q.value=k,q.textContent=`${k}%`}),I.readAsArrayBuffer($)}}),x.setupOptions(x.engineInstance.getOptions());const X=[["grid","render.grid.enable"],["axis","ui.axis"],["fxaa","render.effect.antialiasing.enable"],["tone","render.effect.tone_mapping"],["ssao","render.effect.ambient_occlusion"],["ambient","render.hdri.ambient"]],le=(D,$)=>{document.querySelector("#"+D).addEventListener("change",I=>{x.engineInstance.getOptions().toggle($),x.engineInstance.getWindow().render()})};for(let[D,$]of X)le(D,$);const Ie=()=>{document.documentElement.classList.add("theme-dark"),document.documentElement.classList.remove("theme-light"),x.engineInstance.getOptions().set_color("render.grid.color",.25,.27,.33),x.engineInstance.getWindow().render()},Fe=()=>{document.documentElement.classList.add("theme-light"),document.documentElement.classList.remove("theme-dark"),x.engineInstance.getOptions().set_color("render.grid.color",.67,.69,.75),x.engineInstance.getWindow().render()};document.querySelector("#dark").addEventListener("change",D=>{D.target.checked?Ie():Fe()}),Ie(),document.querySelector("#z-up").addEventListener("click",D=>{x.engineInstance.getOptions().set_as_string("scene.up_direction","+Z"),document.getElementById("z-up").classList.add("is-active"),document.getElementById("y-up").classList.remove("is-active"),g(document.getElementById("file-name").innerHTML)}),document.querySelector("#y-up").addEventListener("click",D=>{x.engineInstance.getOptions().set_as_string("scene.up_direction","+Y"),document.getElementById("y-up").classList.add("is-active"),document.getElementById("z-up").classList.remove("is-active"),g(document.getElementById("file-name").innerHTML)});const Oe=document.getElementById("main"),me=window.devicePixelRatio;x.engineInstance.getWindow().setSize(me*Oe.clientWidth,me*Oe.clientHeight),x.engineInstance.getWindow().render(),x.engineInstance.getInteractor().start();function H(D,$,I){return $?`model_urlparam.${$}`:I?I.split("filename=")[1].split(";")[0]:D.split("/").pop()}async function ge(D,$){const I=await fetch(D);if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const j=I.headers.get("Content-Length");j||console.warn("Content-Length header is missing");const k=j?parseInt(j,10):0;let A=0;const O=I.body.getReader(),ee=new ReadableStream({start(m){function S(){O.read().then(({done:Y,value:ne})=>{if(Y){m.close();return}A+=ne.length,$&&$(A,k),m.enqueue(ne),S()}).catch(Y=>{console.error("Stream reading error:",Y),m.error(Y)})}S()}});return new Response(ee)}function ce(D,$){const I=Math.floor(100*D/$);q.parentElement.style.display="block",q.value=I,q.textContent=`${I}%`,console.log(`${I}%`,D,$)}function he(){const D=new URLSearchParams(window.location.hash.replace(/^#/,"?")),$=D.get("model"),I=D.get("extension");if($){const A=decodeURI($);ge(A,ce).then(O=>{if(!O.ok)throw new Error(`HTTP error, status = ${O.status}`);const ee=O.headers.get("content-disposition"),m=H(A,I,ee);O.arrayBuffer().then(S=>{x.FS.writeFile(m,new Uint8Array(S)),g(m),q.parentElement.style.display="none"})}).catch(function(O){console.log("error caught during fetch",O),alert(`Error occurred while fetching the model at provided url (passed as url-param). 

This might be a CORS issue (you can avoid it by using a Allow-CORS plugin) because server does not allow cross-origin requests, or the url to the file is wrong. 

Complete error message: `+O.message)})}else g("f3d.vtp");const j=x.engineInstance.getOptions();for(let[A,O]of X){const ee=D.get(A);if(ee){j.set_as_string(O,ee.toLowerCase());const m=j.get_as_string(O)=="true";ui_switch=document.querySelector("#"+A),ui_switch&&(ui_switch.checked=m)}}const k=D.get("up");if(k){console.log("up",k),j.set_string("scene.up_direction",k);for(const A of["z-up","y-up"])document.getElementById(A).classList.remove("is-active");k=="+Y"?document.getElementById("y-up").classList.add("is-active"):document.getElementById("z-up").classList.add("is-active"),g(document.getElementById("file-name").innerHTML)}x.engineInstance.getWindow().render()}addEventListener("hashchange",D=>{he()}),he()}).catch(x=>console.error("Internal exception: "+x));
